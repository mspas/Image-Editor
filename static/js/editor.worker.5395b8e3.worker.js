!function(r){var e={};function n(t){if(e[t])return e[t].exports;var a=e[t]={i:t,l:!1,exports:{}};return r[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=r,n.c=e,n.d=function(r,e,t){n.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},n.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"===typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var a in r)n.d(t,a,function(e){return r[e]}.bind(null,a));return t},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},n.p="/Image-Editor/",n(n.s=0)}([function(r,e,n){"use strict";function t(r){return r>255?255:r<0?0:r}n.r(e);var a=function(){var r="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(e){var n,t;(e="undefined"!==typeof(e=e||{})?e:{}).ready=new Promise((function(r,e){n=r,t=e}));var a,o={};for(a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);var i,f=[],u="";"undefined"!==typeof document&&document.currentScript&&(u=document.currentScript.src),r&&(u=r),u=0!==u.indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"";e.print||console.log.bind(console);var c,s=e.printErr||console.warn.bind(console);for(a in o)o.hasOwnProperty(a)&&(e[a]=o[a]);o=null,e.arguments&&(f=e.arguments),e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(c=e.wasmBinary);e.noExitRuntime;var l,p={Memory:function(r){this.buffer=new ArrayBuffer(65536*r.initial)},Module:function(r){},Instance:function(r,e){this.exports=function(r){for(var e,n=new Uint8Array(123),t=25;t>=0;--t)n[48+t]=52+t,n[65+t]=t,n[97+t]=26+t;function a(r){!function(r,e,t){for(var a,o,i=0,f=e,u=t.length,c=e+(3*u>>2)-("="==t[u-2])-("="==t[u-1]);i<u;i+=4)a=n[t.charCodeAt(i+1)],o=n[t.charCodeAt(i+2)],r[f++]=n[t.charCodeAt(i)]<<2|a>>4,f<c&&(r[f++]=a<<4|o>>2),f<c&&(r[f++]=o<<6|n[t.charCodeAt(i+3)])}(e,1025,"BlA=")}return n[43]=62,n[47]=63,function(r){var n,t=r.a.buffer,o=new Int8Array(t),i=(new Int16Array(t),new Int32Array(t)),f=new Uint8Array(t),u=(new Uint16Array(t),new Uint32Array(t)),c=(new Float32Array(t),new Float64Array(t),Math.imul),s=(Math.fround,Math.abs,Math.clz32,Math.min,Math.max,Math.floor,Math.ceil,Math.trunc,Math.sqrt,r.abort),l=r.b,p=5244416;function m(r){var e,n;return(r=(e=i[256])+(n=r+3&-4)|0)>>>0<=e>>>0&&(0|n)>=1||r>>>0>(t.byteLength/65536|0)<<16>>>0&&!(0|l(0|r))?(i[257]=48,-1):(i[256]=r,e)}function h(r){var e;return(-1>>>(e=31&r)&-2)<<e|(-1<<(r=0-r&31)&-2)>>>r}return e=f,a(),{c:function(){},d:function(r,e,n){r|=0,n|=0;var t,a=0,i=0,u=0,c=0,s=0,l=0,p=0,m=0,h=0,d=0,b=0,y=0,v=0;if(t=(0|(e|=0))/2|0,(0|e)>=2)for(p=e-2|0,m=e-3|0,h=e-4|0;d=f[0|(a=(i+h|0)+r|0)],b=f[0|(c=(i+m|0)+r|0)],y=f[0|(s=(i+p|0)+r|0)],i=f[0|(l=((-1^u)+e|0)+r|0)],v=a,a=r+u|0,o[0|v]=f[0|a],o[0|c]=f[a+1|0],o[0|s]=f[a+2|0],o[0|l]=f[a+3|0],o[a+3|0]=i,o[a+2|0]=y,o[a+1|0]=b,o[0|a]=d,i=0-(u=n+u|0)|0,(0|u)<(0|t););},e:function(r,e,n,t,a){r|=0,e|=0,n|=0,a|=0;var i=0,u=0,s=0,l=0,p=0,m=0,h=0,d=0;if(!((0|(t|=0))<1)&&!((0|(s=c(n,a)))<2))for(m=(0|s)/2|0,e=0;;){for(h=c(e,s),d=c(s,e=e+1|0),n=0;l=f[0|(i=(n+h|0)+r|0)]|f[i+1|0]<<8|f[i+2|0]<<16|f[i+3|0]<<24,u=(p=(d-n|0)+r|0)-4|0,o[0|i]=f[0|u],o[i+1|0]=f[p-3|0],o[i+2|0]=f[p-2|0],o[i+3|0]=f[p-1|0],o[0|u]=l,o[u+1|0]=l>>>8,o[u+2|0]=l>>>16,o[u+3|0]=l>>>24,(0|m)>(0|(n=n+a|0)););if((0|e)==(0|t))break}},f:function(r,e,n,t,a,i){r|=0,e|=0,n|=0,a|=0,i|=0;var u=0,s=0,l=0,p=0,m=0,h=0;if(!((0|(t|=0))<1)&&!((0|(m=c(a,i)))<1))for(n=0;;){for(p=0,u=0;s=e+h|0,l=c(c(a-(p=!((0|u)%(0|i)|0)+p|0)|0,t)+n|0,i)+r|0,o[0|s]=f[0|l],o[s+1|0]=f[l+1|0],o[s+2|0]=f[l+2|0],o[s+3|0]=f[l+3|0],h=i+h|0,(0|m)>(0|(u=i+u|0)););if((0|t)==(0|(n=n+1|0)))break}},g:function(r,e,n){r|=0,n|=0;var t=0,a=0,i=0,u=0;if(!((0|(e|=0))<1))if(1==(0|n)){if(u=1&(e=1+(((t=e-1|0)>>>0)/(n>>>0)|0)|0),i=f[r+1|0],n>>>0<=t>>>0)for(e&=-2;o[(t=r+a|0)+1|0]=-1^i,o[0|t]=-1^f[0|t],i=f[t+2|0],o[t+2|0]=-1^i,o[(a=(t=n+a|0)+r|0)+1|0]=i,o[0|a]=-1^f[0|a],i=-1^f[a+2|0],o[a+2|0]=i,a=n+t|0,e=e-2|0;);u&&(o[(r=r+a|0)+1|0]=-1^i,o[0|r]=-1^f[0|r],o[r+2|0]=-1^f[r+2|0])}else for(;o[0|(t=r+a|0)]=-1^f[0|t],o[t+1|0]=-1^f[t+1|0],o[t+2|0]=-1^f[t+2|0],(0|(a=n+a|0))<(0|e););},h:function(r,e,n,t){r|=0,n|=0,t|=0;var a=0,i=0,u=0,c=0;if(!((0|(e|=0))<1))if(1==(0|t))for(a=f[r+1|0];a=(0|(a=(255&a)+n|0))>0?a:0,o[(i=r+u|0)+1|0]=(0|a)<255?a:255,a=(0|(a=f[0|i]+n|0))>0?a:0,o[0|i]=(0|a)<255?a:255,c=i,a=(0|(i=(0|(i=f[i+2|0]+n|0))>0?i:0))<255?i:255,o[c+2|0]=a,(0|(u=t+u|0))<(0|e););else for(;a=(0|(a=f[0|(i=r+u|0)]+n|0))>0?a:0,o[0|i]=(0|a)<255?a:255,a=(0|(a=f[i+1|0]+n|0))>0?a:0,o[i+1|0]=(0|a)<255?a:255,c=i,i=(0|(i=f[i+2|0]+n|0))>0?i:0,o[c+2|0]=(0|i)<255?i:255,(0|(u=t+u|0))<(0|e););},i:function(r,e,n){r|=0,n|=0;var t=0,a=0,i=0,u=0;if(!((0|(e|=0))<1)){if(u=1&(t=1+(((a=e-1|0)>>>0)/(n>>>0)|0)|0),e=0,n>>>0<=a>>>0)for(a=-2&t;i=f[0|(t=r+e|0)],o[t+2|0]=i,o[t+1|0]=i,t=f[0|(e=(i=e+n|0)+r|0)],o[e+2|0]=t,o[e+1|0]=t,e=n+i|0,a=a-2|0;);u&&(e=f[0|(r=r+e|0)],o[r+2|0]=e,o[r+1|0]=e)}},j:function(r,e,n,t,a,i,u,s,l,p){r|=0,e|=0,n|=0,t|=0,a|=0,i|=0,u|=0,s|=0,p|=0;var m=0,h=0,d=0;if(!((0|(l|=0))<1)&&!((0|(n=c(u,p)))>=(0|(m=c(u+s|0,p)))))for(l=i+l|0,h=c(t,p),t=0;;){for(d=c(i,h),s=n;u=(s+d|0)+r|0,o[0|(a=e+t|0)]=f[0|u],o[a+1|0]=f[u+1|0],o[a+2|0]=f[u+2|0],o[a+3|0]=f[u+3|0],t=t+p|0,(0|m)>(0|(s=s+p|0)););if(!((0|l)>(0|(i=i+1|0))))break}},k:function(r){var e,n=0,t=0,a=0,o=0,c=0,l=0,d=0,b=0,y=0,v=0,g=0;p=e=p-16|0;r:{e:{n:{t:{a:{o:{i:{f:{u:{c:{s:{l:{if((r|=0)>>>0<=244){if(3&(n=(c=i[258])>>>(t=(b=r>>>0<11?16:r+11&-8)>>>3|0)|0)){r=(o=i[(n=(a=t+(1&(-1^n))|0)<<3)+1080>>2])+8|0,(0|(t=i[o+8>>2]))!=(0|(n=n+1072|0))?(i[t+12>>2]=n,i[n+8>>2]=t):i[258]=h(a)&c,n=a<<3,i[o+4>>2]=3|n,i[(n=n+o|0)+4>>2]=1|i[n+4>>2];break r}if((v=i[260])>>>0>=b>>>0)break l;if(n){t=r=(n=(0-(r=(0-(r=2<<t)|r)&n<<t)&r)-1|0)>>>12&16,t|=r=(n=n>>>r|0)>>>5&8,t|=r=(n=n>>>r|0)>>>2&4,l=i[(r=(t=((t|=r=(n=n>>>r|0)>>>1&2)|(r=(n=n>>>r|0)>>>1&1))+(n>>>r|0)|0)<<3)+1080>>2],(0|(n=i[l+8>>2]))!=(0|(r=r+1072|0))?(i[n+12>>2]=r,i[r+8>>2]=n):(c=h(t)&c,i[258]=c),r=l+8|0,i[l+4>>2]=3|b,o=(n=t<<3)-b|0,i[(a=l+b|0)+4>>2]=1|o,i[n+l>>2]=o,v&&(t=1072+((n=v>>>3|0)<<3)|0,l=i[263],(n=1<<n)&c?n=i[t+8>>2]:(i[258]=n|c,n=t),i[t+8>>2]=l,i[n+12>>2]=l,i[l+12>>2]=t,i[l+8>>2]=n),i[263]=a,i[260]=o;break r}if(!(d=i[259]))break l;for(t=r=(n=(d&0-d)-1|0)>>>12&16,t|=r=(n=n>>>r|0)>>>5&8,t|=r=(n=n>>>r|0)>>>2&4,n=i[1336+(((t|=r=(n=n>>>r|0)>>>1&2)|(r=(n=n>>>r|0)>>>1&1))+(n>>>r|0)<<2)>>2],o=(-8&i[n+4>>2])-b|0,t=n;(r=i[t+16>>2])||(r=i[t+20>>2]);)o=(a=(t=(-8&i[r+4>>2])-b|0)>>>0<o>>>0)?t:o,n=a?r:n,t=r;if((y=n+b|0)>>>0<=n>>>0)break s;if(g=i[n+24>>2],(0|(a=i[n+12>>2]))!=(0|n)){r=i[n+8>>2],i[r+12>>2]=a,i[a+8>>2]=r;break e}if(!(r=i[(t=n+20|0)>>2])){if(!(r=i[n+16>>2]))break c;t=n+16|0}for(;l=t,a=r,(r=i[(t=r+20|0)>>2])||(t=a+16|0,r=i[a+16>>2]););i[l>>2]=0;break e}if(b=-1,!(r>>>0>4294967231)&&(b=-8&(r=r+11|0),y=i[259])){c=31,o=0-b|0,b>>>0<=16777215&&(r=r>>>8|0,r<<=l=r+1048320>>>16&8,c=28+((r=((r<<=t=r+520192>>>16&4)<<(n=r+245760>>>16&2)>>>15|0)-(n|t|l)|0)<<1|b>>>r+21&1)|0);p:{m:{if(t=i[1336+(c<<2)>>2])for(r=0,n=b<<(31==(0|c)?0:25-(c>>>1|0)|0);;){if(!((l=(-8&i[t+4>>2])-b|0)>>>0>=o>>>0)&&(a=t,!(o=l))){o=0,r=t;break m}if(l=i[t+20>>2],t=i[16+((n>>>29&4)+t|0)>>2],r=l?(0|l)==(0|t)?r:l:r,n<<=1,!t)break}else r=0;if(!(r|a)){if(!(r=(0-(r=2<<c)|r)&y))break l;t=r=(n=(r&0-r)-1|0)>>>12&16,t|=r=(n=n>>>r|0)>>>5&8,t|=r=(n=n>>>r|0)>>>2&4,r=i[1336+(((t|=r=(n=n>>>r|0)>>>1&2)|(r=(n=n>>>r|0)>>>1&1))+(n>>>r|0)<<2)>>2]}if(!r)break p}for(;o=(t=(n=(-8&i[r+4>>2])-b|0)>>>0<o>>>0)?n:o,a=t?r:a,r=(n=i[r+16>>2])||i[r+20>>2];);}if(!(!a|i[260]-b>>>0<=o>>>0)){if((d=a+b|0)>>>0<=a>>>0)break s;if(c=i[a+24>>2],(0|a)!=(0|(n=i[a+12>>2]))){r=i[a+8>>2],i[r+12>>2]=n,i[n+8>>2]=r;break n}if(!(r=i[(t=a+20|0)>>2])){if(!(r=i[a+16>>2]))break u;t=a+16|0}for(;l=t,n=r,(r=i[(t=r+20|0)>>2])||(t=n+16|0,r=i[n+16>>2]););i[l>>2]=0;break n}}}if((t=i[260])>>>0>=b>>>0){a=i[263],(n=t-b|0)>>>0>=16?(i[260]=n,r=a+b|0,i[263]=r,i[r+4>>2]=1|n,i[t+a>>2]=n,i[a+4>>2]=3|b):(i[263]=0,i[260]=0,i[a+4>>2]=3|t,i[(r=t+a|0)+4>>2]=1|i[r+4>>2]),r=a+8|0;break r}if((d=i[261])>>>0>b>>>0){n=d-b|0,i[261]=n,r=(t=i[264])+b|0,i[264]=r,i[r+4>>2]=1|n,i[t+4>>2]=3|b,r=t+8|0;break r}if(r=0,n=y=b+47|0,i[376]?t=i[378]:(i[379]=-1,i[380]=-1,i[377]=4096,i[378]=4096,i[376]=e+12&-16^1431655768,i[381]=0,i[369]=0,t=4096),(t=(l=n+t|0)&(o=0-t|0))>>>0<=b>>>0)break r;if((a=i[368])&&a>>>0<(c=(n=i[366])+t|0)>>>0|n>>>0>=c>>>0)break r;if(4&f[1476])break o;l:{p:{if(a=i[264])for(r=1480;;){if(a>>>0<(n=i[r>>2])+i[r+4>>2]>>>0&&n>>>0<=a>>>0)break p;if(!(r=i[r+8>>2]))break}if(-1==(0|(n=m(0))))break i;if(c=t,(r=(a=i[377])-1|0)&n&&(c=(t-n|0)+(r+n&0-a)|0),c>>>0<=b>>>0|c>>>0>2147483646)break i;if((a=i[368])&&a>>>0<(o=(r=i[366])+c|0)>>>0|r>>>0>=o>>>0)break i;if((0|n)!=(0|(r=m(c))))break l;break a}if((c=o&l-d)>>>0>2147483646)break i;if((0|(n=m(c)))==(i[r>>2]+i[r+4>>2]|0))break f;r=n}if(!(-1==(0|r)|b+48>>>0<=c>>>0)){if((n=(n=i[378])+(y-c|0)&0-n)>>>0>2147483646){n=r;break a}if(-1!=(0|m(n))){c=n+c|0,n=r;break a}m(0-c|0);break i}if(n=r,-1!=(0|r))break a;break i}s()}a=0;break e}n=0;break n}if(-1!=(0|n))break a}i[369]=4|i[369]}if(t>>>0>2147483646)break t;if((n=m(t))>>>0>=(r=m(0))>>>0|-1==(0|n)|-1==(0|r))break t;if((c=r-n|0)>>>0<=b+40>>>0)break t}r=i[366]+c|0,i[366]=r,r>>>0>u[367]&&(i[367]=r);a:{o:{i:{if(l=i[264]){for(r=1480;;){if(((a=i[r>>2])+(t=i[r+4>>2])|0)==(0|n))break i;if(!(r=i[r+8>>2]))break}break o}for((r=i[262])>>>0<=n>>>0&&r||(i[262]=n),r=0,i[371]=c,i[370]=n,i[266]=-1,i[267]=i[376],i[373]=0;t=(a=r<<3)+1072|0,i[a+1080>>2]=t,i[a+1084>>2]=t,32!=(0|(r=r+1|0)););t=(a=c-40|0)-(r=n+8&7?-8-n&7:0)|0,i[261]=t,r=r+n|0,i[264]=r,i[r+4>>2]=1|t,i[4+(n+a|0)>>2]=40,i[265]=i[380];break a}if(!(8&i[r+12>>2]|n>>>0<=l>>>0|a>>>0>l>>>0)){i[r+4>>2]=t+c,t=(r=l+8&7?-8-l&7:0)+l|0,i[264]=t,r=(n=i[261]+c|0)-r|0,i[261]=r,i[t+4>>2]=1|r,i[4+(n+l|0)>>2]=40,i[265]=i[380];break a}}(a=i[262])>>>0>n>>>0&&(i[262]=n,a=0),t=n+c|0,r=1480;o:{i:{f:{u:{c:{s:{for(;;){if((0|t)!=i[r>>2]){if(r=i[r+8>>2])continue;break s}break}if(!(8&f[r+12|0]))break c}for(r=1480;;){if((t=i[r>>2])>>>0<=l>>>0&&(o=t+i[r+4>>2]|0)>>>0>l>>>0)break u;r=i[r+8>>2]}}if(i[r>>2]=n,i[r+4>>2]=i[r+4>>2]+c,i[(y=(n+8&7?-8-n&7:0)+n|0)+4>>2]=3|b,t=((c=t+(t+8&7?-8-t&7:0)|0)-y|0)-b|0,d=b+y|0,(0|c)==(0|l)){i[264]=d,r=i[261]+t|0,i[261]=r,i[d+4>>2]=1|r;break i}if(i[263]==(0|c)){i[263]=d,r=i[260]+t|0,i[260]=r,i[d+4>>2]=1|r,i[r+d>>2]=r;break i}if(1==(3&(r=i[c+4>>2]))){l=-8&r;c:if(r>>>0<=255){if(a=i[c+8>>2],r=r>>>3|0,(0|(n=i[c+12>>2]))==(0|a)){i[258]=i[258]&h(r);break c}i[a+12>>2]=n,i[n+8>>2]=a}else{if(b=i[c+24>>2],(0|c)==(0|(n=i[c+12>>2])))if((o=i[(r=c+20|0)>>2])||(o=i[(r=c+16|0)>>2])){for(;a=r,(o=i[(r=(n=o)+20|0)>>2])||(r=n+16|0,o=i[n+16>>2]););i[a>>2]=0}else n=0;else r=i[c+8>>2],i[r+12>>2]=n,i[n+8>>2]=r;if(b){a=i[c+28>>2];s:{if(i[(r=1336+(a<<2)|0)>>2]==(0|c)){if(i[r>>2]=n,n)break s;i[259]=i[259]&h(a);break c}if(i[b+(i[b+16>>2]==(0|c)?16:20)>>2]=n,!n)break c}i[n+24>>2]=b,(r=i[c+16>>2])&&(i[n+16>>2]=r,i[r+24>>2]=n),(r=i[c+20>>2])&&(i[n+20>>2]=r,i[r+24>>2]=n)}}c=c+l|0,t=t+l|0}if(i[c+4>>2]=-2&i[c+4>>2],i[d+4>>2]=1|t,i[t+d>>2]=t,t>>>0<=255){n=1072+((r=t>>>3|0)<<3)|0,(t=i[258])&(r=1<<r)?r=i[n+8>>2]:(i[258]=r|t,r=n),i[n+8>>2]=d,i[r+12>>2]=d,i[d+12>>2]=n,i[d+8>>2]=r;break i}if(r=31,t>>>0<=16777215&&(r=t>>>8|0,r<<=o=r+1048320>>>16&8,r=28+((r=((r<<=a=r+520192>>>16&4)<<(n=r+245760>>>16&2)>>>15|0)-(n|a|o)|0)<<1|t>>>r+21&1)|0),i[d+28>>2]=r,i[d+16>>2]=0,i[d+20>>2]=0,o=1336+(r<<2)|0,(a=i[259])&(n=1<<r)){for(r=t<<(31==(0|r)?0:25-(r>>>1|0)|0),n=i[o>>2];;){if(a=n,(-8&i[n+4>>2])==(0|t))break f;if(n=r>>>29|0,r<<=1,!(n=i[(o=a+(4&n)|0)+16>>2]))break}i[o+16>>2]=d,i[d+24>>2]=a}else i[259]=n|a,i[o>>2]=d,i[d+24>>2]=o;i[d+12>>2]=d,i[d+8>>2]=d;break i}for(t=(a=c-40|0)-(r=n+8&7?-8-n&7:0)|0,i[261]=t,r=r+n|0,i[264]=r,i[r+4>>2]=1|t,i[4+(n+a|0)>>2]=40,i[265]=i[380],i[(t=(r=(o+(o-39&7?39-o&7:0)|0)-47|0)>>>0<l+16>>>0?l:r)+4>>2]=27,r=i[373],i[t+16>>2]=i[372],i[t+20>>2]=r,r=i[371],i[t+8>>2]=i[370],i[t+12>>2]=r,i[372]=t+8,i[371]=c,i[370]=n,i[373]=0,r=t+24|0;i[r+4>>2]=7,n=r+8|0,r=r+4|0,n>>>0<o>>>0;);if((0|t)==(0|l))break a;if(i[t+4>>2]=-2&i[t+4>>2],o=t-l|0,i[l+4>>2]=1|o,i[t>>2]=o,o>>>0<=255){n=1072+((r=o>>>3|0)<<3)|0,(t=i[258])&(r=1<<r)?r=i[n+8>>2]:(i[258]=r|t,r=n),i[n+8>>2]=l,i[r+12>>2]=l,i[l+12>>2]=n,i[l+8>>2]=r;break a}if(r=31,i[l+16>>2]=0,i[l+20>>2]=0,o>>>0<=16777215&&(r=o>>>8|0,r<<=a=r+1048320>>>16&8,r=28+((r=((r<<=t=r+520192>>>16&4)<<(n=r+245760>>>16&2)>>>15|0)-(n|t|a)|0)<<1|o>>>r+21&1)|0),i[l+28>>2]=r,a=1336+(r<<2)|0,(t=i[259])&(n=1<<r)){for(r=o<<(31==(0|r)?0:25-(r>>>1|0)|0),n=i[a>>2];;){if(t=n,(0|o)==(-8&i[n+4>>2]))break o;if(n=r>>>29|0,r<<=1,!(n=i[(a=t+(4&n)|0)+16>>2]))break}i[a+16>>2]=l,i[l+24>>2]=t}else i[259]=n|t,i[a>>2]=l,i[l+24>>2]=a;i[l+12>>2]=l,i[l+8>>2]=l;break a}r=i[a+8>>2],i[r+12>>2]=d,i[a+8>>2]=d,i[d+24>>2]=0,i[d+12>>2]=a,i[d+8>>2]=r}r=y+8|0;break r}r=i[t+8>>2],i[r+12>>2]=l,i[t+8>>2]=l,i[l+24>>2]=0,i[l+12>>2]=t,i[l+8>>2]=r}if(!((r=i[261])>>>0<=b>>>0)){n=r-b|0,i[261]=n,r=(t=i[264])+b|0,i[264]=r,i[r+4>>2]=1|n,i[t+4>>2]=3|b,r=t+8|0;break r}}i[257]=48,r=0;break r}n:if(c){t=i[a+28>>2];t:{if(i[(r=1336+(t<<2)|0)>>2]==(0|a)){if(i[r>>2]=n,n)break t;y=h(t)&y,i[259]=y;break n}if(i[c+(i[c+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}i[n+24>>2]=c,(r=i[a+16>>2])&&(i[n+16>>2]=r,i[r+24>>2]=n),(r=i[a+20>>2])&&(i[n+20>>2]=r,i[r+24>>2]=n)}n:if(o>>>0<=15)r=o+b|0,i[a+4>>2]=3|r,i[(r=r+a|0)+4>>2]=1|i[r+4>>2];else if(i[a+4>>2]=3|b,i[d+4>>2]=1|o,i[o+d>>2]=o,o>>>0<=255)n=1072+((r=o>>>3|0)<<3)|0,(t=i[258])&(r=1<<r)?r=i[n+8>>2]:(i[258]=r|t,r=n),i[n+8>>2]=d,i[r+12>>2]=d,i[d+12>>2]=n,i[d+8>>2]=r;else{r=31,o>>>0<=16777215&&(r=o>>>8|0,r<<=l=r+1048320>>>16&8,r=28+((r=((r<<=t=r+520192>>>16&4)<<(n=r+245760>>>16&2)>>>15|0)-(n|t|l)|0)<<1|o>>>r+21&1)|0),i[d+28>>2]=r,i[d+16>>2]=0,i[d+20>>2]=0,t=1336+(r<<2)|0;t:{if((n=1<<r)&y){for(r=o<<(31==(0|r)?0:25-(r>>>1|0)|0),b=i[t>>2];;){if((-8&i[(n=b)+4>>2])==(0|o))break t;if(t=r>>>29|0,r<<=1,!(b=i[(t=n+(4&t)|0)+16>>2]))break}i[t+16>>2]=d,i[d+24>>2]=n}else i[259]=n|y,i[t>>2]=d,i[d+24>>2]=t;i[d+12>>2]=d,i[d+8>>2]=d;break n}r=i[n+8>>2],i[r+12>>2]=d,i[n+8>>2]=d,i[d+24>>2]=0,i[d+12>>2]=n,i[d+8>>2]=r}r=a+8|0;break r}e:if(g){t=i[n+28>>2];n:{if(i[(r=1336+(t<<2)|0)>>2]==(0|n)){if(i[r>>2]=a,a)break n;i[259]=h(t)&d;break e}if(i[(i[g+16>>2]==(0|n)?16:20)+g>>2]=a,!a)break e}i[a+24>>2]=g,(r=i[n+16>>2])&&(i[a+16>>2]=r,i[r+24>>2]=a),(r=i[n+20>>2])&&(i[a+20>>2]=r,i[r+24>>2]=a)}o>>>0<=15?(r=o+b|0,i[n+4>>2]=3|r,i[(r=r+n|0)+4>>2]=1|i[r+4>>2]):(i[n+4>>2]=3|b,i[y+4>>2]=1|o,i[o+y>>2]=o,v&&(t=1072+((r=v>>>3|0)<<3)|0,a=i[263],(r=1<<r)&c?r=i[t+8>>2]:(i[258]=r|c,r=t),i[t+8>>2]=a,i[r+12>>2]=a,i[a+12>>2]=t,i[a+8>>2]=r),i[263]=y,i[260]=o),r=n+8|0}return p=e+16|0,0|r},l:function(r){var e=0,n=0,t=0,a=0,o=0,f=0,c=0;r:if(r|=0){o=(t=r-8|0)+(r=-8&(e=i[r-4>>2]))|0;e:if(!(1&e)){if(!(3&e))break r;if((t=t-(e=i[t>>2])|0)>>>0<u[262])break r;if(r=r+e|0,i[263]==(0|t)){if(3==(3&(e=i[o+4>>2])))return i[260]=r,i[o+4>>2]=-2&e,i[t+4>>2]=1|r,void(i[r+t>>2]=r)}else{if(e>>>0<=255){if(a=i[t+8>>2],e=e>>>3|0,(0|(n=i[t+12>>2]))==(0|a)){i[258]=i[258]&h(e);break e}i[a+12>>2]=n,i[n+8>>2]=a;break e}if(c=i[t+24>>2],(0|t)==(0|(e=i[t+12>>2])))if((n=i[(a=t+20|0)>>2])||(n=i[(a=t+16|0)>>2])){for(;f=a,(n=i[(a=(e=n)+20|0)>>2])||(a=e+16|0,n=i[e+16>>2]););i[f>>2]=0}else e=0;else n=i[t+8>>2],i[n+12>>2]=e,i[e+8>>2]=n;if(!c)break e;a=i[t+28>>2];n:{if(i[(n=1336+(a<<2)|0)>>2]==(0|t)){if(i[n>>2]=e,e)break n;i[259]=i[259]&h(a);break e}if(i[c+(i[c+16>>2]==(0|t)?16:20)>>2]=e,!e)break e}if(i[e+24>>2]=c,(n=i[t+16>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),!(n=i[t+20>>2]))break e;i[e+20>>2]=n,i[n+24>>2]=e}}if(!(t>>>0>=o>>>0)&&1&(e=i[o+4>>2])){e:{if(!(2&e)){if(i[264]==(0|o)){if(i[264]=t,r=i[261]+r|0,i[261]=r,i[t+4>>2]=1|r,i[263]!=(0|t))break r;return i[260]=0,void(i[263]=0)}if(i[263]==(0|o))return i[263]=t,r=i[260]+r|0,i[260]=r,i[t+4>>2]=1|r,void(i[r+t>>2]=r);r=(-8&e)+r|0;n:if(e>>>0<=255){if(e=e>>>3|0,(0|(n=i[o+8>>2]))==(0|(a=i[o+12>>2]))){i[258]=i[258]&h(e);break n}i[n+12>>2]=a,i[a+8>>2]=n}else{if(c=i[o+24>>2],(0|o)==(0|(e=i[o+12>>2])))if((n=i[(a=o+20|0)>>2])||(n=i[(a=o+16|0)>>2])){for(;f=a,(n=i[(a=(e=n)+20|0)>>2])||(a=e+16|0,n=i[e+16>>2]););i[f>>2]=0}else e=0;else n=i[o+8>>2],i[n+12>>2]=e,i[e+8>>2]=n;if(c){a=i[o+28>>2];t:{if(i[(n=1336+(a<<2)|0)>>2]==(0|o)){if(i[n>>2]=e,e)break t;i[259]=i[259]&h(a);break n}if(i[c+(i[c+16>>2]==(0|o)?16:20)>>2]=e,!e)break n}i[e+24>>2]=c,(n=i[o+16>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),(n=i[o+20>>2])&&(i[e+20>>2]=n,i[n+24>>2]=e)}}if(i[t+4>>2]=1|r,i[r+t>>2]=r,i[263]!=(0|t))break e;return void(i[260]=r)}i[o+4>>2]=-2&e,i[t+4>>2]=1|r,i[r+t>>2]=r}if(r>>>0<=255)return e=1072+((r=r>>>3|0)<<3)|0,(n=i[258])&(r=1<<r)?r=i[e+8>>2]:(i[258]=r|n,r=e),i[e+8>>2]=t,i[r+12>>2]=t,i[t+12>>2]=e,void(i[t+8>>2]=r);a=31,i[t+16>>2]=0,i[t+20>>2]=0,r>>>0<=16777215&&(e=r>>>8|0,e<<=f=e+1048320>>>16&8,a=28+((e=((e<<=a=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|a|f)|0)<<1|r>>>e+21&1)|0),i[t+28>>2]=a,f=1336+(a<<2)|0;e:{n:{if((n=i[259])&(e=1<<a)){for(a=r<<(31==(0|a)?0:25-(a>>>1|0)|0),e=i[f>>2];;){if(n=e,(-8&i[e+4>>2])==(0|r))break n;if(e=a>>>29|0,a<<=1,!(e=i[(f=n+(4&e)|0)+16>>2]))break}i[f+16>>2]=t,i[t+24>>2]=n}else i[259]=e|n,i[f>>2]=t,i[t+24>>2]=f;i[t+12>>2]=t,i[t+8>>2]=t;break e}r=i[n+8>>2],i[r+12>>2]=t,i[n+8>>2]=t,i[t+24>>2]=0,i[t+12>>2]=n,i[t+8>>2]=r}r=i[266]-1|0,i[266]=r||-1}}},m:((n=[]).set=function(r,e){this[r]=e},n.get=function(r){return this[r]},n)}}(r)}(W)},instantiate:function(r,e){return{then:function(e){var n=new p.Module(r);e({instance:new p.Instance(n)})}}},RuntimeError:Error};c=[],"object"!==typeof p&&E("no native wasm support detected");var m,h=!1;var d,b,y=e.INITIAL_MEMORY||314572800;(l=e.wasmMemory?e.wasmMemory:new p.Memory({initial:y/65536,maximum:y/65536}))&&(m=l.buffer),y=m.byteLength,m=d=m,e.HEAP8=new Int8Array(d),e.HEAP16=new Int16Array(d),e.HEAP32=new Int32Array(d),e.HEAPU8=new Uint8Array(d),e.HEAPU16=new Uint16Array(d),e.HEAPU32=new Uint32Array(d),e.HEAPF32=new Float32Array(d),e.HEAPF64=new Float64Array(d);var v=[],g=[],w=[],k=[];g.push({func:function(){H()}});var _=0,A=null,P=null;function E(r){e.onAbort&&e.onAbort(r),s(r+=""),h=!0,1,r="abort("+r+"). Build with -s ASSERTIONS=1 for more info.";var n=new p.RuntimeError(r);throw t(n),n}e.preloadedImages={},e.preloadedAudios={};function I(r){return e=r,n="data:application/octet-stream;base64,",String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n);var e,n}var C,S="<<< WASM_BINARY_FILE >>>";function R(r){try{if(r==S&&c)return new Uint8Array(c);var e=T(r);if(e)return e;if(i)return i(r);throw"both async and sync fetching of the wasm failed"}catch(s){E(s)}}function U(r){for(;r.length>0;){var n=r.shift();if("function"!=typeof n){var t=n.func;"number"===typeof t?void 0===n.arg?b.get(t)():b.get(t)(n.arg):t(void 0===n.arg?null:n.arg)}else n(e)}}I(S)||(C=S,S=e.locateFile?e.locateFile(C,u):u+C);var M="function"===typeof atob?atob:function(r){var e,n,t,a,o,i,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=f.indexOf(r.charAt(c++))<<2|(a=f.indexOf(r.charAt(c++)))>>4,n=(15&a)<<4|(o=f.indexOf(r.charAt(c++)))>>2,t=(3&o)<<6|(i=f.indexOf(r.charAt(c++))),u+=String.fromCharCode(e),64!==o&&(u+=String.fromCharCode(n)),64!==i&&(u+=String.fromCharCode(t))}while(c<r.length);return u};function T(r){if(I(r))return function(r){try{for(var e=M(r),n=new Uint8Array(e.length),t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n}catch(a){throw new Error("Converting base64 string to bytes failed.")}}(r.slice("data:application/octet-stream;base64,".length))}var O,W={b:function(r){E("OOM")},a:l},H=(function(){var r={a:W};function n(r,n){var t=r.exports;e.asm=t,b=e.asm.m,function(r){if(_--,e.monitorRunDependencies&&e.monitorRunDependencies(_),0==_&&(null!==A&&(clearInterval(A),A=null),P)){var n=P;P=null,n()}}()}function a(r){n(r.instance)}function o(e){return(c||"function"!==typeof fetch?Promise.resolve().then((function(){return R(S)})):fetch(S,{credentials:"same-origin"}).then((function(r){if(!r.ok)throw"failed to load wasm binary file at '"+S+"'";return r.arrayBuffer()})).catch((function(){return R(S)}))).then((function(e){return p.instantiate(e,r)})).then(e,(function(r){s("failed to asynchronously prepare wasm: "+r),E(r)}))}if(_++,e.monitorRunDependencies&&e.monitorRunDependencies(_),e.instantiateWasm)try{return e.instantiateWasm(r,n)}catch(i){return s("Module.instantiateWasm callback failed with error: "+i),!1}(c||"function"!==typeof p.instantiateStreaming||I(S)||"function"!==typeof fetch?o(a):fetch(S,{credentials:"same-origin"}).then((function(e){return p.instantiateStreaming(e,r).then(a,(function(r){return s("wasm streaming compile failed: "+r),s("falling back to ArrayBuffer instantiation"),o(a)}))}))).catch(t)}(),e.___wasm_call_ctors=function(){return(H=e.___wasm_call_ctors=e.asm.c).apply(null,arguments)});e._rotate180=function(){return(e._rotate180=e.asm.d).apply(null,arguments)},e._mirror_reflection=function(){return(e._mirror_reflection=e.asm.e).apply(null,arguments)},e._rotate90=function(){return(e._rotate90=e.asm.f).apply(null,arguments)},e._invert=function(){return(e._invert=e.asm.g).apply(null,arguments)},e._brighten=function(){return(e._brighten=e.asm.h).apply(null,arguments)},e._gray_scale=function(){return(e._gray_scale=e.asm.i).apply(null,arguments)},e._crop=function(){return(e._crop=e.asm.j).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.k).apply(null,arguments)},e._free=function(){return(e._free=e.asm.l).apply(null,arguments)};function x(r){function t(){O||(O=!0,e.calledRun=!0,h||(!0,U(g),U(w),n(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)r=e.postRun.shift(),k.unshift(r);var r;U(k)}()))}r=r||f,_>0||(!function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)r=e.preRun.shift(),v.unshift(r);var r;U(v)}(),_>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t()))}if(P=function r(){O||x(),O||(P=r)},e.run=x,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return x(),e.ready}}(),o=function(r){var e,n,t;r=r||{},e||(e="undefined"!==typeof r?r:{}),e.ready=new Promise((function(r,e){n=r,t=e}));var a,o={};for(a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);var i="";"undefined"!==typeof document&&document.currentScript&&(i=document.currentScript.src),i=0!==(i="/Image-Editor/editor.wasm").indexOf("blob:")?i.substr(0,i.lastIndexOf("/")+1):"";var f,u=e.printErr||console.warn.bind(console);for(a in o)o.hasOwnProperty(a)&&(e[a]=o[a]);o=null,e.wasmBinary&&(f=e.wasmBinary),e.noExitRuntime,"object"!==typeof WebAssembly&&F("no native wasm support detected");var c,s=!1,l="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0,p="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function m(r,e){for(var n=r>>1,t=n+e/2;!(n>=t)&&A[n];)++n;if(32<(n<<=1)-r&&p)return p.decode(k.subarray(r,n));for(n="",t=0;!(t>=e/2);++t){var a=_[r+2*t>>1];if(0==a)break;n+=String.fromCharCode(a)}return n}function h(r,e,n){if(void 0===n&&(n=2147483647),2>n)return 0;var t=e;n=(n-=2)<2*r.length?n/2:r.length;for(var a=0;a<n;++a)_[e>>1]=r.charCodeAt(a),e+=2;return _[e>>1]=0,e-t}function d(r){return 2*r.length}function b(r,e){for(var n=0,t="";!(n>=e/4);){var a=P[r+4*n>>2];if(0==a)break;++n,65536<=a?(a-=65536,t+=String.fromCharCode(55296|a>>10,56320|1023&a)):t+=String.fromCharCode(a)}return t}function y(r,e,n){if(void 0===n&&(n=2147483647),4>n)return 0;var t=e;n=t+n-4;for(var a=0;a<r.length;++a){var o=r.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&r.charCodeAt(++a)),P[e>>2]=o,(e+=4)+4>n)break}return P[e>>2]=0,e-t}function v(r){for(var e=0,n=0;n<r.length;++n){var t=r.charCodeAt(n);55296<=t&&57343>=t&&++n,e+=4}return e}var g,w,k,_,A,P,E,I,C,S,R=[],U=[],M=[],T=[];function O(){var r=e.preRun.shift();R.unshift(r)}U.push({C:function(){ur()}});var W=0,H=null,x=null;function F(r){throw e.onAbort&&e.onAbort(r),u(r),s=!0,r=new WebAssembly.RuntimeError("abort("+r+"). Build with -s ASSERTIONS=1 for more info."),t(r),r}function B(){var r=D;return String.prototype.startsWith?r.startsWith("data:application/octet-stream;base64,"):0===r.indexOf("data:application/octet-stream;base64,")}e.preloadedImages={},e.preloadedAudios={};var D="editor.wasm";if(!B()){var N=D;D=e.locateFile?e.locateFile(N,i):i+N}function j(){var r=D;try{if(r==D&&f)return new Uint8Array(f);throw"both async and sync fetching of the wasm failed"}catch(e){F(e)}}function L(r){for(;0<r.length;){var n=r.shift();if("function"==typeof n)n(e);else{var t=n.C;"number"===typeof t?void 0===n.B?S.get(t)():S.get(t)(n.B):t(void 0===n.B?null:n.B)}}}function z(r){switch(r){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+r)}}var V=void 0;function q(r){for(var e="";k[r];)e+=V[k[r++]];return e}var Y={},Z={},G={};function J(r){var e=Error,n=function(r,e){if(void 0===r)r="_unknown";else{var n=(r=r.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);r=48<=n&&57>=n?"_"+r:r}return new Function("body","return function "+r+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}(r,(function(e){this.name=r,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var K=void 0;function Q(r){throw new K(r)}function X(r,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=e.name;if(r||Q('type "'+t+'" must have a positive integer typeid pointer'),Z.hasOwnProperty(r)){if(n.D)return;Q("Cannot register type '"+t+"' twice")}Z[r]=e,delete G[r],Y.hasOwnProperty(r)&&(e=Y[r],delete Y[r],e.forEach((function(r){r()})))}var $=[],rr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function er(r){return this.fromWireType(E[r>>2])}function nr(r){if(null===r)return"null";var e=typeof r;return"object"===e||"array"===e||"function"===e?r.toString():""+r}function tr(r,e){switch(e){case 2:return function(r){return this.fromWireType(I[r>>2])};case 3:return function(r){return this.fromWireType(C[r>>3])};default:throw new TypeError("Unknown float type: "+r)}}function ar(r,e,n){switch(e){case 0:return n?function(r){return w[r]}:function(r){return k[r]};case 1:return n?function(r){return _[r>>1]}:function(r){return A[r>>1]};case 2:return n?function(r){return P[r>>2]}:function(r){return E[r>>2]};default:throw new TypeError("Unknown integer type: "+r)}}for(var or=Array(256),ir=0;256>ir;++ir)or[ir]=String.fromCharCode(ir);V=or,K=e.BindingError=J("BindingError"),e.InternalError=J("InternalError"),e.count_emval_handles=function(){for(var r=0,e=5;e<rr.length;++e)void 0!==rr[e]&&++r;return r},e.get_first_emval=function(){for(var r=5;r<rr.length;++r)if(void 0!==rr[r])return rr[r];return null};var fr={i:function(r,e,n,t,a){var o=z(n);X(r,{name:e=q(e),fromWireType:function(r){return!!r},toWireType:function(r,e){return e?t:a},argPackAdvance:8,readValueFromPointer:function(r){if(1===n)var t=w;else if(2===n)t=_;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);t=P}return this.fromWireType(t[r>>o])},A:null})},h:function(r,e){X(r,{name:e=q(e),fromWireType:function(r){var e=rr[r].value;return 4<r&&0===--rr[r].F&&(rr[r]=void 0,$.push(r)),e},toWireType:function(r,e){return function(r){switch(r){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=$.length?$.pop():rr.length;return rr[e]={F:1,value:r},e}}(e)},argPackAdvance:8,readValueFromPointer:er,A:null})},d:function(r,e,n){n=z(n),X(r,{name:e=q(e),fromWireType:function(r){return r},toWireType:function(r,e){if("number"!==typeof e&&"boolean"!==typeof e)throw new TypeError('Cannot convert "'+nr(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:tr(e,n),A:null})},b:function(r,e,n,t,a){function o(r){return r}e=q(e),-1===a&&(a=4294967295);var i=z(n);if(0===t){var f=32-8*n;o=function(r){return r<<f>>>f}}var u=-1!=e.indexOf("unsigned");X(r,{name:e,fromWireType:o,toWireType:function(r,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+nr(n)+'" to '+this.name);if(n<t||n>a)throw new TypeError('Passing a number "'+nr(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+t+", "+a+"]!");return u?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:ar(e,i,0!==t),A:null})},a:function(r,e,n){function t(r){var e=E;return new a(g,e[1+(r>>=2)],e[r])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];X(r,{name:n=q(n),fromWireType:t,argPackAdvance:8,readValueFromPointer:t},{D:!0})},e:function(r,e){var n="std::string"===(e=q(e));X(r,{name:e,fromWireType:function(r){var e=E[r>>2];if(n)for(var t=r+4,a=0;a<=e;++a){var o=r+4+a;if(a==e||0==k[o]){if(t){var i=t,f=k,u=i+(o-t);for(t=i;f[t]&&!(t>=u);)++t;if(16<t-i&&f.subarray&&l)i=l.decode(f.subarray(i,t));else{for(u="";i<t;){var c=f[i++];if(128&c){var s=63&f[i++];if(192==(224&c))u+=String.fromCharCode((31&c)<<6|s);else{var p=63&f[i++];65536>(c=224==(240&c)?(15&c)<<12|s<<6|p:(7&c)<<18|s<<12|p<<6|63&f[i++])?u+=String.fromCharCode(c):(c-=65536,u+=String.fromCharCode(55296|c>>10,56320|1023&c))}}else u+=String.fromCharCode(c)}i=u}}else i="";if(void 0===m)var m=i;else m+=String.fromCharCode(0),m+=i;t=o+1}}else{for(m=Array(e),a=0;a<e;++a)m[a]=String.fromCharCode(k[r+4+a]);m=m.join("")}return lr(r),m},toWireType:function(r,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t="string"===typeof e;t||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||Q("Cannot pass non-string to std::string");var a=(n&&t?function(){for(var r=0,n=0;n<e.length;++n){var t=e.charCodeAt(n);55296<=t&&57343>=t&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++n)),127>=t?++r:r=2047>=t?r+2:65535>=t?r+3:r+4}return r}:function(){return e.length})(),o=sr(4+a+1);if(E[o>>2]=a,n&&t)!function(r,e,n){var t=k;if(0<n){n=e+n-1;for(var a=0;a<r.length;++a){var o=r.charCodeAt(a);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&r.charCodeAt(++a)),127>=o){if(e>=n)break;t[e++]=o}else{if(2047>=o){if(e+1>=n)break;t[e++]=192|o>>6}else{if(65535>=o){if(e+2>=n)break;t[e++]=224|o>>12}else{if(e+3>=n)break;t[e++]=240|o>>18,t[e++]=128|o>>12&63}t[e++]=128|o>>6&63}t[e++]=128|63&o}}t[e]=0}}(e,o+4,a+1);else if(t)for(t=0;t<a;++t){var i=e.charCodeAt(t);255<i&&(lr(o),Q("String has UTF-16 code units that do not fit in 8 bits")),k[o+4+t]=i}else for(t=0;t<a;++t)k[o+4+t]=e[t];return null!==r&&r.push(lr,o),o},argPackAdvance:8,readValueFromPointer:er,A:function(r){lr(r)}})},c:function(r,e,n){if(n=q(n),2===e)var t=m,a=h,o=d,i=function(){return A},f=1;else 4===e&&(t=b,a=y,o=v,i=function(){return E},f=2);X(r,{name:n,fromWireType:function(r){for(var n,a=E[r>>2],o=i(),u=r+4,c=0;c<=a;++c){var s=r+4+c*e;c!=a&&0!=o[s>>f]||(u=t(u,s-u),void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),u=s+e)}return lr(r),n},toWireType:function(r,t){"string"!==typeof t&&Q("Cannot pass non-string to C++ string type "+n);var i=o(t),u=sr(4+i+e);return E[u>>2]=i>>f,a(t,u+4,i+e),null!==r&&r.push(lr,u),u},argPackAdvance:8,readValueFromPointer:er,A:function(r){lr(r)}})},j:function(r,e){X(r,{G:!0,name:e=q(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},f:function(r,e,n){k.copyWithin(r,e,e+n)},g:function(){F("OOM")}};!function(){function r(r){e.asm=r.exports,c=e.asm.k,g=r=c.buffer,e.HEAP8=w=new Int8Array(r),e.HEAP16=_=new Int16Array(r),e.HEAP32=P=new Int32Array(r),e.HEAPU8=k=new Uint8Array(r),e.HEAPU16=A=new Uint16Array(r),e.HEAPU32=E=new Uint32Array(r),e.HEAPF32=I=new Float32Array(r),e.HEAPF64=C=new Float64Array(r),S=e.asm.v,W--,e.monitorRunDependencies&&e.monitorRunDependencies(W),0==W&&(null!==H&&(clearInterval(H),H=null),x&&(r=x,x=null,r()))}function n(e){r(e.instance)}function a(r){return(f||"function"!==typeof fetch?Promise.resolve().then((function(){return j()})):fetch(D,{credentials:"same-origin"}).then((function(r){if(!r.ok)throw"failed to load wasm binary file at '"+D+"'";return r.arrayBuffer()})).catch((function(){return j()}))).then((function(r){return WebAssembly.instantiate(r,o)})).then(r,(function(r){u("failed to asynchronously prepare wasm: "+r),F(r)}))}var o={a:fr};if(W++,e.monitorRunDependencies&&e.monitorRunDependencies(W),e.instantiateWasm)try{return e.instantiateWasm(o,r)}catch(i){return u("Module.instantiateWasm callback failed with error: "+i),!1}(f||"function"!==typeof WebAssembly.instantiateStreaming||B()||"function"!==typeof fetch?a(n):fetch(D,{credentials:"same-origin"}).then((function(r){return WebAssembly.instantiateStreaming(r,o).then(n,(function(r){return u("wasm streaming compile failed: "+r),u("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(t)}();var ur=e.___wasm_call_ctors=function(){return(ur=e.___wasm_call_ctors=e.asm.l).apply(null,arguments)};e._rotate180=function(){return(e._rotate180=e.asm.m).apply(null,arguments)},e._mirror_reflection=function(){return(e._mirror_reflection=e.asm.n).apply(null,arguments)},e._rotate90=function(){return(e._rotate90=e.asm.o).apply(null,arguments)},e._invert=function(){return(e._invert=e.asm.p).apply(null,arguments)},e._brighten=function(){return(e._brighten=e.asm.q).apply(null,arguments)},e._gray_scale=function(){return(e._gray_scale=e.asm.r).apply(null,arguments)},e._crop=function(){return(e._crop=e.asm.s).apply(null,arguments)},e.___getTypeName=function(){return(e.___getTypeName=e.asm.t).apply(null,arguments)},e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.u).apply(null,arguments)};var cr,sr=e._malloc=function(){return(sr=e._malloc=e.asm.w).apply(null,arguments)},lr=e._free=function(){return(lr=e._free=e.asm.x).apply(null,arguments)};function pr(){function r(){if(!cr&&(cr=!0,e.calledRun=!0,!s)){if(L(U),L(M),n(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var r=e.postRun.shift();T.unshift(r)}L(T)}}if(!(0<W)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)O();L(R),0<W||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),r()}),1)):r())}}if(x=function r(){cr||pr(),cr||(x=r)},e.run=pr,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return pr(),r.ready};self.addEventListener("message",(async function(r){if("init"===r.data.option)a({noInitialRun:!0,noExitRuntime:!0}).then(r=>{i=r}),o({noInitialRun:!0,noExitRuntime:!0}).then(r=>{f=r}),console.log("Worker modules initialized!"),postMessage("ok");else{let e=null;switch(r.data.tech){case-1:e=await async function(r){const e=r.data.imagesData;let n=[];for(let t=0;t<e.length;t++){const a=e[t].data,o=r.data.channels;let i=e[t].width,f=e[t].height,c=e[t].length,l=r.data.iterations;postMessage({results:n,nextImage:e[t].name});let p=[];for(let e=0;e<u.length;e++){let n=await s(a,c,i,f,r.data.brightnessValue,o,l,u[e]);p.push(n)}n.push({name:e[t].name,results:p})}return{results:n}}(r);break;case 0:e=function(r){const e=r.data.imageData,n=r.data.channels;let t=r.data.width,a=r.data.height,o=r.data.length,i=null;switch(r.data.option){case"rotate180":i=m(e,o,n);break;case"rotate90":i=h(e,o,t,a,n),t=i.width,a=i.height;break;case"mirror":i=d(e,o,t,a,n);break;case"invert":i=b(e,o,n);break;case"brighten":i=y(e,o,r.data.brightnessValue,n);break;case"gray":i=v(e,o,n);break;case"crop":i=g(e,o,t,a,n),t=i.width,a=i.height,o=i.length}return{imageData:i.data,width:t,height:a,time:i.time}}(r);break;case 1:e=c(i,r);break;case 2:e=c(f,r)}postMessage(e)}}));var i=null,f=null,u=["rotate180","rotate90","mirror","invert","brighten","gray","crop"];function c(r,e){const n=e.data.imageData,t=e.data.channels;let a=e.data.width,o=e.data.height,i=e.data.length,f=0,u=0,c=null,s=null,l=null;switch(e.data.option){case"rotate180":f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,r._rotate180(c,i,t),u=performance.now(),r._free(c);break;case"rotate90":f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,l=r._malloc(i),r.HEAPU8.set(n,l),r._rotate90(c,l,i,a,o,t),s=l,a=e.data.height,o=e.data.width,u=performance.now(),r._free(c),r._free(l);break;case"mirror":f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,r._mirror_reflection(c,i,a,o,t),u=performance.now(),r._free(c);break;case"invert":f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,r._invert(c,i,t),u=performance.now(),r._free(c);break;case"brighten":f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,r._brighten(c,i,e.data.brightnessValue,t),u=performance.now(),r._free(c);break;case"gray":f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,r._gray_scale(c,i,t),u=performance.now(),r._free(c);break;case"crop":let p=Math.floor(0),m=Math.floor(0),h=Math.floor(.8*a),d=Math.floor(.7*o);f=performance.now(),c=r._malloc(i),r.HEAPU8.set(n,c),s=c,l=r._malloc(i),r.HEAPU8.set(props.imageData,l),r._crop(c,l,i,a,o,p,m,h,d,t),s=l,a=h,o=d,i=d*h*t,u=performance.now(),r._free(c),r._free(l)}const p=r.HEAPU8.subarray(s,s+i);return{imageData:new Uint8Array(p),width:a,height:o,time:u-f}}const s=async(r,e,n,t,a,o,u,c)=>new Promise((s,C)=>{let S=[],R=[],U=null,M=null,T=0;for(let i=0;i<u;i++){switch(c){case"rotate180":M=m(r,e,o);break;case"rotate90":M=h(r,e,n,t,o);break;case"mirror":M=d(r,e,n,t,o);break;case"invert":M=b(r,e,o);break;case"brighten":M=y(r,e,a,o);break;case"gray":M=v(r,e,o);break;case"crop":M=g(r,e,n,t,o)}R.push(M.time)}U={tech:0,func:c,time:Math.round(100*(l(R)+Number.EPSILON))/100,std:Math.round(100*(p(R)+Number.EPSILON))/100},S.push(U),R=[];for(let f=0;f<u;f++){switch(c){case"rotate180":T=w(i,r,e,o);break;case"rotate90":T=k(i,r,e,n,t,o);break;case"mirror":T=_(i,r,e,n,t,o);break;case"invert":T=A(i,r,e,o);break;case"brighten":T=P(i,r,e,a,o);break;case"gray":T=E(i,r,e,o);break;case"crop":T=I(i,r,e,n,t,o)}R.push(T)}U={tech:1,func:c,time:Math.round(100*(l(R)+Number.EPSILON))/100,std:Math.round(100*(p(R)+Number.EPSILON))/100},S.push(U),R=[];for(let i=0;i<u;i++){switch(c){case"rotate180":T=w(f,r,e,o);break;case"rotate90":T=k(f,r,e,n,t,o);break;case"mirror":T=_(f,r,e,n,t,o);break;case"invert":T=A(f,r,e,o);break;case"brighten":T=P(f,r,e,a,o);break;case"gray":T=E(f,r,e,o);break;case"crop":T=I(f,r,e,n,t,o)}R.push(T)}return U={tech:2,func:c,time:Math.round(100*(l(R)+Number.EPSILON))/100,std:Math.round(100*(p(R)+Number.EPSILON))/100},S.push(U),s(S)});function l(r){let e=0;for(let n=0;n<r.length;n++)e+=r[n];return e/r.length}function p(r){const e=r.length,n=r.reduce((r,e)=>r+e)/e;return Math.sqrt(r.map(r=>Math.pow(r-n,2)).reduce((r,e)=>r+e)/e)}function m(r,e,n){let t,a,o;return t=performance.now(),o=function(r,e,n){for(var t,a,o,i,f=0;f<e/2;f+=n)t=r[e-4-f],a=r[e-3-f],o=r[e-2-f],i=r[e-1-f],r[e-4-f]=r[f],r[e-3-f]=r[f+1],r[e-2-f]=r[f+2],r[e-1-f]=r[f+3],r[f]=t,r[f+1]=a,r[f+2]=o,r[f+3]=i;return r}(r,e,n),a=performance.now(),{data:o,time:a-t}}function h(r,e,n,t,a){let o,i,f,u=new Uint8Array(e);o=performance.now(),f=function(r,e,n,t,a,o){for(var i=0,f=0,u=t,c=a,s=0;s<u;s++)for(var l=0,p=0;l<c*o;l+=o)l%o===0&&p++,f=t*o*(a-p)+s*o,e[i]=r[f],e[i+1]=r[f+1],e[i+2]=r[f+2],e[i+3]=r[f+3],i+=o;return e}(r,u,0,n,t,a);let c=n;return n=t,t=c,i=performance.now(),{data:f,time:i-o,width:n,height:t}}function d(r,e,n,t,a){let o,i,f;return o=performance.now(),f=function(r,e,n,t,a){for(var o,i,f,u,c,s,l=0;l<t;l++)for(var p=0;p<n*a/2;p+=a)s=n*(l+1)*a-p,o=r[c=n*l*a+p],i=r[c+1],f=r[c+2],u=r[c+3],r[c]=r[s-4],r[c+1]=r[s-3],r[c+2]=r[s-2],r[c+3]=r[s-1],r[s-4]=o,r[s-3]=i,r[s-2]=f,r[s-1]=u;return r}(r,0,n,t,a),i=performance.now(),{data:f,time:i-o}}function b(r,e,n){let t,a,o;return t=performance.now(),o=function(r,e,n){for(var t=0;t<e;t+=n)r[t]=255-r[t],r[t+1]=255-r[t+1],r[t+2]=255-r[t+2];return r}(r,e,n),a=performance.now(),{data:o,time:a-t}}function y(r,e,n,a){let o,i,f;return o=performance.now(),f=function(r,e,n,a){for(var o=0;o<e;o+=a)r[o]=t(r[o]+n),r[o+1]=t(r[o+1]+n),r[o+2]=t(r[o+2]+n);return r}(r,e,n,a),i=performance.now(),{data:f,time:i-o}}function v(r,e,n){let t,a,o;return t=performance.now(),o=function(r,e,n){for(var t,a,o=0;o<e;o+=n)t=r[o],a=r[o+3],r[o]=t,r[o+1]=t,r[o+2]=t,r[o+3]=a;return r}(r,e,n),a=performance.now(),{data:o,time:a-t}}function g(r,e,n,t,a){let o,i,f,u=Math.floor(.1*t),c=Math.floor(.1*n),s=Math.floor(.8*n),l=Math.floor(.7*t),p=new Uint8Array(s*l*a);return o=performance.now(),f=function(r,e,n,t,a,o,i,f,u,c){for(var s=0,l=0,p=f+i,m=u+o,h=o;h<m;h++)for(var d=i*c;d<p*c;d+=c,s+=c)l=h*t*c+d,e[s]=r[l],e[s+1]=r[l+1],e[s+2]=r[l+2],e[s+3]=r[l+3];return e}(r,p,0,n,0,u,c,s,l,a),n=s,t=l,e=l*s*a,i=performance.now(),{data:f,time:i-o,width:n,height:t,length:e}}function w(r,e,n,t){let a,o;a=performance.now();const i=r._malloc(n);return r.HEAPU8.set(e,i),r._rotate180(i,n,t),o=performance.now(),r._free(i),o-a}function k(r,e,n,t,a,o){let i,f,u=t;i=performance.now();const c=r._malloc(n);r.HEAPU8.set(e,c);const s=r._malloc(n);return r.HEAPU8.set(e,s),r._rotate90(c,s,n,t,a,o),t=a,a=u,f=performance.now(),r._free(c),r._free(s),f-i}function _(r,e,n,t,a,o){let i,f;i=performance.now();const u=r._malloc(n);return r.HEAPU8.set(e,u),r._mirror_reflection(u,n,t,a,o),f=performance.now(),r._free(u),f-i}function A(r,e,n,t){let a,o;a=performance.now();const i=r._malloc(n);return r.HEAPU8.set(e,i),r._invert(i,n,t),o=performance.now(),r._free(i),o-a}function P(r,e,n,t,a){let o,i;o=performance.now();const f=r._malloc(n);return r.HEAPU8.set(e,f),r._brighten(f,n,t,a),i=performance.now(),r._free(f),i-o}function E(r,e,n,t){let a,o;a=performance.now();const i=r._malloc(n);return r.HEAPU8.set(e,i),r._gray_scale(i,n,t),o=performance.now(),r._free(i),o-a}function I(r,e,n,t,a,o){let i,f,u=Math.floor(.1*a),c=Math.floor(.1*t),s=Math.floor(.8*t),l=Math.floor(.7*a);i=performance.now();const p=r._malloc(n);r.HEAPU8.set(e,p);const m=r._malloc(n);return r.HEAPU8.set(e,m),r._crop(p,m,n,t,a,u,c,s,l,o),t=s,a=l,n=l*s*o,f=performance.now(),r._free(p),r._free(m),f-i}}]);
//# sourceMappingURL=editor.worker.5395b8e3.worker.js.map