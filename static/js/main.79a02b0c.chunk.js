((self||this)["webpackJsonpimage-editor"]=(self||this)["webpackJsonpimage-editor"]||[]).push([[0],[,,,function(e,t,n){e.exports={downloaderContainer:"editor_downloaderContainer__280Yl",description:"editor_description__1RI_-",box:"editor_box__1Q4as","format-selector":"editor_format-selector__2EuM2",radio:"editor_radio__vumem",button:"editor_button__2RyuB",alert:"editor_alert__2WhNg",fadeIn:"editor_fadeIn__1wVMR",buttonWrap:"editor_buttonWrap__3sseh",rangeInput:"editor_rangeInput__21iyk",slider:"editor_slider__3IrL_"}},function(e,t,n){e.exports={navContainer:"switch_navContainer__1P0bP",switchContainer:"switch_switchContainer__14SEl",switchOption:"switch_switchOption__3ZaxI",switchOptionContent:"switch_switchOptionContent__1H-ez",title:"switch_title__3MVSs",titleSm:"switch_titleSm__3cfPR",mobileContainer:"switch_mobileContainer__4nhwP",mobileNavBtn:"switch_mobileNavBtn__30auN",mobileNav:"switch_mobileNav__1a6wA",slideInDown:"switch_slideInDown__2MjB1",switchOptionMobileContent:"switch_switchOptionMobileContent__3Zr7b",active:"switch_active__3xhXZ",shake:"switch_shake__Jv5Vp"}},,function(e,t,n){e.exports={tableWrap:"results_tableWrap__79k6H",tableResults:"results_tableResults__3KOC_",resultTime:"results_resultTime__2x3lk",resultSTD:"results_resultSTD__3SW6m",techTitle:"results_techTitle__2Mune"}},,,,,,function(e,t,n){e.exports={selector:"selector_selector__ucwTc",option:"selector_option__3ExMK"}},,,,function(e,t,n){e.exports={App:"App_App__1O8C2",center:"App_center__O277T",downloaderWrap:"App_downloaderWrap__2ccpR"}},,function(e,t,n){e.exports=n.p+"static/media/video2.19667022.mp4"},function(e,t,n){e.exports=n(59)},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./1280x720.jpg":51,"./1920x1080.jpg":52,"./200x200.jpg":53,"./3840x2160.jpg":54,"./4500x3000.jpg":55,"./5463x3418.jpg":56,"./720x480.jpg":57,"./7680x4320.jpg":58};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=50},function(e,t,n){e.exports=n.p+"static/media/1280x720.e3e87b01.jpg"},function(e,t,n){e.exports=n.p+"static/media/1920x1080.79173b99.jpg"},function(e,t,n){e.exports=n.p+"static/media/200x200.3f407475.jpg"},function(e,t,n){e.exports=n.p+"static/media/3840x2160.0826051e.jpg"},function(e,t,n){e.exports=n.p+"static/media/4500x3000.3c600a46.jpg"},function(e,t,n){e.exports=n.p+"static/media/5463x3418.516926c6.jpg"},function(e,t,n){e.exports=n.p+"static/media/720x480.9207a118.jpg"},function(e,t,n){e.exports=n.p+"static/media/7680x4320.489566b5.jpg"},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"rotate180",(function(){return F})),n.d(r,"mirror_reflection",(function(){return L})),n.d(r,"rotate90",(function(){return V})),n.d(r,"invert",(function(){return z})),n.d(r,"brighten",(function(){return q})),n.d(r,"gray_scale",(function(){return G})),n.d(r,"dupa",(function(){return Z})),n.d(r,"crop",(function(){return X}));var a=n(0),i=n.n(a),o=n(15),c=n.n(o),u=(n(24),n(2)),l=n(16),s=n.n(l),f=n(4),m=n.n(f),d=n(17),p=n(11);var h=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],o=n[1],c=function(t,n){o(!1),e.onOptionClick(t,n)},l=e.options.map((function(t,n){return i.a.createElement("div",{className:e.activeOption===n?"".concat(m.a.switchOption," ").concat(m.a.active):m.a.switchOption,key:n,onClick:e.onOptionClick.bind(null,t,n)},i.a.createElement("div",{className:m.a.switchOptionContent},i.a.createElement("span",{className:m.a.title},t.title),i.a.createElement("span",{className:m.a.titleSm},t.subtitle)))})),s=e.options.map((function(t,n){return i.a.createElement("li",{className:e.activeOption===n?"".concat(m.a.switchOptionMobile," ").concat(m.a.activeMobile):m.a.switchOptionMobile,key:n,onClick:c.bind(null,t,n)},i.a.createElement("div",{className:m.a.switchOptionMobileContent},i.a.createElement("span",{className:m.a.title},t.title),i.a.createElement("span",{className:m.a.titleSm},t.subtitle)))}));return i.a.createElement("div",{className:m.a.navContainer},i.a.createElement("div",{className:m.a.mobileContainer},i.a.createElement("button",{className:"".concat(m.a.mobileNavBtn," button"),onClick:function(){o(!r)}},i.a.createElement(d.a,{icon:r?p.b:p.a})),r?i.a.createElement("nav",{className:m.a.mobileNav},i.a.createElement("ul",null,s)):""),i.a.createElement("div",{className:m.a.switchContainer},l))},b=n(5),v=n.n(b),g=n(8),y=n(3),w=n.n(y);function _(){return new Worker(n.p+"static/js/editor.worker.0a0281e8.worker.js")}var k=n(7),E=n.n(k);var A=function(e){return i.a.createElement("div",{className:w.a.buttonWrap},i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("rotate180")}},"Rotate180"),i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("rotate90")}},"Rotate90"),i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("mirror")}},"Mirror"),i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("invert")}},"Invert colors"),i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("brighten")}},"Brighten"),i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("gray")}},"Gray scale"),i.a.createElement("button",{className:w.a.button,onClick:function(){return e.imageEditHandler("crop")}},"Crop"))};var O=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(null),l=Object(u.a)(c,2),s=l[0],f=l[1],m=Object(a.useState)(0),d=Object(u.a)(m,2),p=d[0],h=d[1],b=Object(a.useState)(null),y=Object(u.a)(b,2),_=y[0],k=y[1],O=Object(a.useState)("Applying filter to the image..."),C=Object(u.a)(O,2),j=C[0],S=C[1];Object(a.useEffect)((function(){e.worker&&(e.worker.onmessage=function(e){e.data.imageData&&(console.log("dupa",e.data.imageData),h(e.data.time),S("Preparing image preview..."),k({imageData:e.data.imageData,width:e.data.width,height:e.data.height}))})}),[e.worker]),Object(a.useEffect)((function(){if(_){var t=e.createCanvas(_.imageData,_.width,_.height);f(t),o(!1),window.scrollTo(0,document.body.scrollHeight),e.scrollBottom()}}),[_]);var x=function(){var t=Object(g.a)(v.a.mark((function t(n){var r,a,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.imageData){t.next=2;break}return t.abrupt("return",!0);case 2:S("Applying filter to the image..."),o(!0),window.scrollTo(0,document.body.scrollHeight),4,r=e.imageData.length,a=e.imageArraySize.width,i=e.imageArraySize.height,e.worker.postMessage({tech:e.tech,option:n,imageData:e.imageData,length:r,width:a,height:i,channels:4,brightnessValue:e.brightnessValue});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){o(!0),setTimeout((function(){e(!0)}),100)})).then((function(){x(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:w.a.resultBox,id:"result"},i.a.createElement(A,{imageEditHandler:I}),s?i.a.createElement("img",{src:s,alt:"Result"}):"",p>0?i.a.createElement("div",{className:w.a.alert},"Execution of this task took ",p," ms."):"",r?i.a.createElement("div",null,i.a.createElement(E.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50}),i.a.createElement("p",null,j)):"")},C=n(12),j=n.n(C);var S=function(e){var t=e.options,n=e.clickHandler,r=e.selectorType;return i.a.createElement("form",{className:j.a.selector},t.map((function(e,t){return i.a.createElement("div",{className:j.a.option,key:t*Math.PI},i.a.createElement("input",{type:r,id:"scales",name:"scales",defaultChecked:e.selected,onChange:function(){return n(t,!e.selected)}}),i.a.createElement("span",null,e.name))})))},x=n(6),I=n.n(x),T=n(13),R=n.n(T);var N=function(e){var t=e.benchmarkResults,n=e.techNames,r=e.funcNames,o=e.allResultsReady,c=Object(a.useState)([]),l=Object(u.a)(c,2),s=l[0],f=l[1];Object(a.useEffect)((function(){if(o){for(var e=[],a=1;a<n.length;a++)e.push([]);for(var i=0;i<e.length;i++)for(var c=0;c<r.length;c++)e[i].push([]);t.forEach((function(t){for(var n=0;n<t.results.length;n++){var r=t.results[n],a=p(r[1].time,r[0].time),i=p(r[2].time,r[0].time);e[0][n].push(a),e[1][n].push(i)}}));for(var u=[],l=1;l<n.length;l++)u.push({techName:n[l],functionsGain:[]});for(var s=0;s<e.length;s++)for(var d=0;d<e[s].length;d++)u[s].functionsGain.push({funcName:r[d],meanGain:Math.round(100*(m(e[s][d])+Number.EPSILON))/100});console.log(u),f(u)}}),[o]);var m=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length},d=function(e,t,n){for(var r=0;r<e.results.length;r++)for(var a=e.results[r],i=0;i<a.length;i++)if(a[i].tech===t&&a[i].func===n)return{time:a[i].time,std:a[i].std}},p=function(e,t){return 100*(1-e/t)};return i.a.createElement("div",{id:"results"},i.a.createElement("h1",null,i.a.createElement("span",null,"Results - relative gain:")),o?i.a.createElement("div",null,i.a.createElement(R.a,{id:"results-xls-button",className:w.a.button,table:"results-table",filename:"results",sheet:"results",buttonText:"Download as XLS"}),i.a.createElement("div",{className:I.a.tableWrap},i.a.createElement("table",{className:I.a.tableResults,id:"results-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"%"),r.map((function(e){return i.a.createElement("td",{key:e},e)})))),i.a.createElement("tbody",null,["asm.js","WebAssembly"].map((function(e,t){return i.a.createElement("tr",{key:"".concat(e).concat(t)},i.a.createElement("td",{className:I.a.techTitle},e),r.map((function(n,r){return i.a.createElement("td",{key:"".concat(e).concat(n)},i.a.createElement("p",{className:I.a.resultTime},function(e,t){return s.length<1?0:s[e].functionsGain[t].meanGain}(t,r)))})))})))))):"",i.a.createElement("h1",null,i.a.createElement("span",null,"Results - detailed:")),o?i.a.createElement(R.a,{id:"detailed-results-xls-button",className:w.a.button,table:"detailed-results-table",filename:"detailed-results",sheet:"detailed-results",buttonText:"Download as XLS"}):"",i.a.createElement("div",{className:I.a.tableWrap},i.a.createElement("table",{className:I.a.tableResults,id:"detailed-results-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("p",{className:I.a.resultTime},"[ms]"),i.a.createElement("span",{className:I.a.resultSTD},"STD")),r.map((function(e){return i.a.createElement("td",{key:e},e)})))),t.map((function(e,t){return i.a.createElement("tbody",{key:"".concat(e.name).concat(t)},i.a.createElement("tr",null,i.a.createElement("td",null,e.name),r.map((function(e){return i.a.createElement("td",{key:"".concat(e).concat(t)})}))),n.map((function(t,n){return i.a.createElement("tr",{key:"".concat(t).concat(n)},i.a.createElement("td",{className:I.a.techTitle},t),r.map((function(r){return i.a.createElement("td",{key:"".concat(t).concat(r)},i.a.createElement("p",{className:I.a.resultTime},d(e,n,r).time),i.a.createElement("span",{className:I.a.resultSTD},d(e,n,r).std))})))})))})))))};var M=function(e){var t=Object(a.useState)(!0),r=Object(u.a)(t,2),o=r[0],c=r[1],l=Object(a.useState)(!1),s=Object(u.a)(l,2),f=s[0],m=s[1],d=Object(a.useState)("Loading images..."),p=Object(u.a)(d,2),h=p[0],b=p[1],y=Object(a.useState)([]),_=Object(u.a)(y,2),k=_[0],A=_[1],O=Object(a.useState)([]),C=Object(u.a)(O,2),j=C[0],x=C[1],I=Object(a.useState)(0),T=Object(u.a)(I,2),R=T[0],M=T[1],P=Object(a.useState)(0),U=Object(u.a)(P,2),W=U[0],D=U[1],B=Object(a.useState)(-1),H=Object(u.a)(B,2),F=H[0],L=H[1],V=Object(a.useState)([]),z=Object(u.a)(V,2),J=z[0],q=z[1];Object(a.useEffect)((function(){var e=X(n(50));L(e.length);var t=document.getElementById("main-container");G(t,e)}),[]),Object(a.useEffect)((function(){R===F&&(c(!1),b("".concat(R," images loaded:")))}),[R]),Object(a.useEffect)((function(){e.worker&&(e.worker.onmessage=function(e){e.data.results&&(q(e.data.results),e.data.nextImage?b("Now testing for ".concat(e.data.nextImage," image...")):(c(!1),b("Tests done!"),console.log(e.data.results)))})}),[e.worker]);var G=function(e,t){return new Promise((function(n,r){for(var a=0;a<t.length;a++){var i=document.createElement("img");i.onload=Z,i.src=t[a].url,i.value=t[a].name,e.appendChild(i),e.removeChild(i),a===t.length-1&&n(!0)}}))},Z=function(t){var n=t.target,r=e.imgToCanvas(n),a=k,i=j;a.push(r.data),i.push({name:n.value?n.value:"",width:r.width,height:r.height,selected:!0}),A(a),x(i),M(a.length)},X=function(e){var t=[];return e.keys().map((function(n,r){var a=n.replace("./","");t.push({name:a.replace(".jpg",""),url:e(n)})})),t},Y=function(){var t=Object(g.a)(v.a.mark((function t(){var n,r,a,i,o,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=4,b("Starting tests for ".concat(R," images...")),c(!0),m(!0),window.scrollTo(0,document.body.scrollHeight),r=[],a=0,i=0;case 7:if(!(i<k.length)){t.next=17;break}if(o=k[i],j[i].selected){t.next=11;break}return t.abrupt("continue",14);case 11:u={data:o,name:j[i].name,width:j[i].width,height:j[i].height,length:o.length},a++,r.push(u);case 14:i++,t.next=7;break;case 17:D(a),e.worker.postMessage({tech:-1,imagesData:r,channels:n,iterations:100,brightnessValue:40});case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.a.createElement("div",{className:w.a.resultBox,id:"main-container"},o||R!==F?"":i.a.createElement("div",null,i.a.createElement("p",null,h),i.a.createElement(S,{options:j,clickHandler:function(e,t){var n=j;n[e].selected=t,x(n)},selectorType:"checkbox"}),i.a.createElement("button",{className:w.a.button,onClick:Y},"Test")),i.a.createElement("p",null,f?"Number of iterations: ".concat(100,". ").concat(h):"Number of iterations: ".concat(100),f?" (".concat(J.length,"/").concat(W,")"):""),o?i.a.createElement("div",null,i.a.createElement(E.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})):"",i.a.createElement(N,{benchmarkResults:J,techNames:["JavaScript","asm.js","WebAssembly"],funcNames:["rotate180","rotate90","mirror","invert","brighten","gray","crop"],allResultsReady:!(o||!f)}))},P=n(18),U=n.n(P);var W=function(e){Object(a.useEffect)((function(){e.videoInput.current&&t()}),[]);var t=function(){var t=e.canvasOutput.current,r=t.getContext("2d");e.videoInput.current.addEventListener("play",(function(){n(r,4,[],[])}))},n=function t(n,a,i,o){var c=e.canvasOutput.current.width,u=e.canvasOutput.current.height;if(!e.videoInput.current)return!1;if(e.videoInput.current.paused)return!1;var l=u*c*a,s=function(e,t,n){var r=performance.now();t.length>0&&t[0]<=r-1e3&&t.shift(),t.push(r);var a=t.length;return e.font="40px Arial",e.fillText(a,10,40),n.push(a),{times:t,testTimer:n}}(n,i,o);window.requestAnimationFrame((function(){for(var e=performance.now();i.length>0&&i[0]<=e-1e3;)i.shift();i.push(e);var t=i.length;n.font="40px Arial",n.fillText(t,10,40),o.push(t)})),n.drawImage(e.videoInput.current,0,0,c,u);var f=n.getImageData(0,0,c,u),m=r(f.data,c,u,l,a);if(m.width&&m.height){var d=document.getElementById("btnVideo").value,p="rotate90"===d?m.height:m.width,h="rotate90"===d?m.width:m.height,b=n.createImageData(p,h);b.data.set(m.data),n.putImageData(b,0,0)}else f.data.set(m.data),n.putImageData(f,0,0);setTimeout((function(){return t(n,a,s.times,s.testTimer)}),0)},r=function(t,n,r,a,i){var w=parseInt(e.videoInput.current.getAttribute("value")),_=document.getElementById("btnVideo").value,k=null;if(console.log(_),0===w){var E=e.jsModule;switch(_){case"rotate180":k=o(E,t,a,i);break;case"rotate90":k=c(E,t,a,n,r,i);break;case"mirror":k=u(E,t,a,n,r,i);break;case"invert":k=l(E,t,a,i);break;case"brighten":k=s(E,t,a,40,i);break;case"grayscale":k=f(E,t,a,i);break;case"crop":console.log(n,r,e.resolution.width,e.resolution.height),k=m(E,t,a,e.resolution.width,e.resolution.height,i)}}else{var A=1===w?e.asmModule:e.wasmModule;switch(_){case"rotate180":k=d(A,t,a,i);break;case"rotate90":k=p(A,t,a,n,r,i);break;case"mirror":k=h(A,t,a,n,r,i);break;case"invert":k=b(A,t,a,i);break;case"brighten":k=v(A,t,a,40,i);break;case"grayscale":k=g(A,t,a,i);break;case"crop":k=y(A,t,a,n,r,i)}}return k},o=function(e,t,n,r){return{data:e.rotate180(t,n,r)}},c=function(e,t,n,r,a,i){var o=new Uint8Array(n),c=r;return{data:e.rotate90(t,o,n,r,a,i),width:r=a,height:a=c}},u=function(e,t,n,r,a,i){return{data:e.mirror_reflection(t,n,r,a,i)}},l=function(e,t,n,r){return{data:e.invert(t,n,r)}},s=function(e,t,n,r,a){return{data:e.brighten(t,n,r,a)}},f=function(e,t,n,r){return{data:e.gray_scale(t,n,r)}},m=function(e,t,n,r,a,i){var o,c=Math.floor(.1*a),u=Math.floor(.1*r),l=Math.floor(.8*r),s=Math.floor(.7*a),f=new Uint8Array(l*s*i);return o=e.crop(t,f,n,r,a,c,u,l,s,i),r=l,a=s,n=s*l*i,console.log(o.length),{data:o,width:r,height:a,length:n}},d=function(e,t,n,r){var a=e._malloc(n);e.HEAPU8.set(t,a),e._rotate180(a,n,r);var i=new Uint8Array(e.HEAPU8.subarray(a,a+n));return e._free(a),{data:i}},p=function(e,t,n,r,a,i){var o=r,c=e._malloc(n);e.HEAPU8.set(t,c);var u=e._malloc(n);e.HEAPU8.set(t,u),e._rotate90(c,u,n,r,a,i),r=a,a=o;var l=new Uint8Array(e.HEAPU8.subarray(u,u+n));return e._free(c),e._free(u),{data:l,width:r,height:a}},h=function(e,t,n,r,a,i){var o=e._malloc(n);e.HEAPU8.set(t,o),e._mirror_reflection(o,n,r,a,i);var c=new Uint8Array(e.HEAPU8.subarray(o,o+n));return e._free(o),{data:c}},b=function(e,t,n,r){var a=e._malloc(n);e.HEAPU8.set(t,a),e._invert(a,n,r);var i=new Uint8Array(e.HEAPU8.subarray(a,a+n));return e._free(a),{data:i}},v=function(e,t,n,r,a){var i=e._malloc(n);e.HEAPU8.set(t,i),e._brighten(i,n,r,a);var o=new Uint8Array(e.HEAPU8.subarray(i,i+n));return e._free(i),{data:o}},g=function(e,t,n,r){var a=e._malloc(n);e.HEAPU8.set(t,a),e._gray_scale(a,n,r);var i=new Uint8Array(e.HEAPU8.subarray(a,a+n));return e._free(a),{data:i}},y=function(e,t,n,r,a,i){var o=Math.floor(.1*a),c=Math.floor(.1*r),u=Math.floor(.8*r),l=Math.floor(.7*a),s=e._malloc(n);e.HEAPU8.set(t,s);var f=e._malloc(n);e.HEAPU8.set(t,f),e._crop(s,f,n,r,a,o,c,u,l,i),r=u,a=l,n=l*u*i;var m=new Uint8Array(e.HEAPU8.subarray(f,f+n));return e._free(s),e._free(f),{data:m,width:r,height:a}};return i.a.createElement("div",null,e.isLoadingAsmModule||e.isLoadingWasmModule?i.a.createElement(E.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50}):i.a.createElement("div",null,i.a.createElement("div",{className:w.a.buttonWrap},i.a.createElement("button",{className:w.a.button,onClick:function(){return console.log(),void(e.videoInput.current.paused?e.videoInput.current.play():e.videoInput.current.pause())},id:"btnVideo",value:e.selectedFunction},"Start/Stop")),i.a.createElement("canvas",{ref:e.canvasOutput,width:"720",height:"480"}),i.a.createElement("video",{width:"720",height:"480",style:{visibility:"hidden",position:"absolute"},ref:e.videoInput,src:U.a,type:"video/mp4",value:"0",muted:!0,controls:!0})))};var D=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=Object(a.useState)(0),o=Object(u.a)(r,2),c=(o[0],o[1]),l=Object(a.useState)("JavaScript"),s=Object(u.a)(l,2),f=s[0],m=s[1],d=Object(a.useState)({width:720,height:480}),p=Object(u.a)(d,2),h=p[0],b=p[1],v=Object(a.useState)("rotate180"),g=Object(u.a)(v,2),y=g[0],_=g[1],k=[{name:"rotate180",selected:!0},{name:"rotate90",selected:!1},{name:"mirror",selected:!1},{name:"invert",selected:!1},{name:"brighten",selected:!1},{name:"grayscale",selected:!1},{name:"crop",selected:!1}],A=[{name:"720x480",selected:!0,width:720,height:480},{name:"1280x720",selected:!1,width:1280,height:720},{name:"1920x1080",selected:!1,width:1920,height:1080},{name:"3840x2160",selected:!1,width:3840,height:2160}],O=[{name:"JavaScript",selected:!0},{name:"asm.js",selected:!1},{name:"WebAssembly",selected:!1}],C=function(e,t){var r=n.current;r.setAttribute("width",e),r.setAttribute("height",t),b({width:e,height:t})},j=function(e,n){var r=t.current;r.setAttribute("width",e),r.setAttribute("height",n)};return i.a.createElement("div",{className:w.a.resultBox,id:"result"},i.a.createElement("h4",null,"".concat(h.width,"x").concat(h.height," ").concat(f," - ").concat(y)),e.isLoadingAsmModule||e.isLoadingWasmModule?i.a.createElement(E.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50}):i.a.createElement("div",null,i.a.createElement(S,{options:A,clickHandler:function(e,n){var r=A[e];t.current.paused||t.current.pause(),b({width:r.width,height:r.height}),C(r.width,r.height),j(r.width,r.height)},selectorType:"radio"}),i.a.createElement(S,{options:O,clickHandler:function(e,n){var r=O[e].name;t.current.paused||t.current.pause(),c(e),m(r),t.current.setAttribute("value",e)},selectorType:"radio"}),i.a.createElement(S,{options:k,clickHandler:function(e,r){var a=k[e].name;t.current.paused||t.current.pause();var i=h.width,o=h.height;document.getElementById("btnVideo").setAttribute("value",a),_(a);var c=n.current;if("rotate90"===a)c.setAttribute("width",o),c.setAttribute("height",i);else if("crop"===a){var u=Math.floor(.8*i),l=Math.floor(.7*o);c.setAttribute("width",u),c.setAttribute("height",l)}else C(h.width,h.height)},selectorType:"radio"}),i.a.createElement(W,{wasmModule:e.wasmModule,asmModule:e.asmModule,jsModule:e.jsModule,isLoadingAsmModule:e.isLoadingAsmModule,isLoadingWasmModule:e.isLoadingWasmModule,prepareImageData:e.prepareImageData,createCanvas:e.createCanvas,imageData:e.imageDataCanvas,imageArraySize:e.imageArraySize,brightnessValue:e.brightnessValue,scrollBottom:e.scrollBottom,videoInput:t,canvasOutput:n,selectedFunction:y,resolution:h})))},B=function(e){var t,n,r;e=e||{},t||(t="undefined"!==typeof e?e:{}),t.ready=new Promise((function(e,t){n=e,r=t}));var a,i={};for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);var o="";"undefined"!==typeof document&&document.currentScript&&(o=document.currentScript.src),o=0!==(o="/Image-Editor/editor.wasm").indexOf("blob:")?o.substr(0,o.lastIndexOf("/")+1):"";var c,u=t.printErr||console.warn.bind(console);for(a in i)i.hasOwnProperty(a)&&(t[a]=i[a]);i=null,t.wasmBinary&&(c=t.wasmBinary),t.noExitRuntime,"object"!==typeof WebAssembly&&W("no native wasm support detected");var l,s=!1,f="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0,m="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function d(e,t){for(var n=e>>1,r=n+t/2;!(n>=r)&&E[n];)++n;if(32<(n<<=1)-e&&m)return m.decode(_.subarray(e,n));for(n="",r=0;!(r>=t/2);++r){var a=k[e+2*r>>1];if(0==a)break;n+=String.fromCharCode(a)}return n}function p(e,t,n){if(void 0===n&&(n=2147483647),2>n)return 0;var r=t;n=(n-=2)<2*e.length?n/2:e.length;for(var a=0;a<n;++a)k[t>>1]=e.charCodeAt(a),t+=2;return k[t>>1]=0,t-r}function h(e){return 2*e.length}function b(e,t){for(var n=0,r="";!(n>=t/4);){var a=A[e+4*n>>2];if(0==a)break;++n,65536<=a?(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a)):r+=String.fromCharCode(a)}return r}function v(e,t,n){if(void 0===n&&(n=2147483647),4>n)return 0;var r=t;n=r+n-4;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),A[t>>2]=i,(t+=4)+4>n)break}return A[t>>2]=0,t-r}function g(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&++n,t+=4}return t}var y,w,_,k,E,A,O,C,j,S,x=[],I=[],T=[],R=[];function N(){var e=t.preRun.shift();x.unshift(e)}I.push({C:function(){ue()}});var M=0,P=null,U=null;function W(e){throw t.onAbort&&t.onAbort(e),u(e),s=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),r(e),e}function D(){var e=B;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}t.preloadedImages={},t.preloadedAudios={};var B="editor.wasm";if(!D()){var H=B;B=t.locateFile?t.locateFile(H,o):o+H}function F(){var e=B;try{if(e==B&&c)return new Uint8Array(c);throw"both async and sync fetching of the wasm failed"}catch(t){W(t)}}function L(e){for(;0<e.length;){var n=e.shift();if("function"==typeof n)n(t);else{var r=n.C;"number"===typeof r?void 0===n.B?S.get(r)():S.get(r)(n.B):r(void 0===n.B?null:n.B)}}}function V(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var z=void 0;function J(e){for(var t="";_[e];)t+=z[_[e++]];return t}var q={},G={},Z={};function X(e){var t=Error,n=function(e,t){if(void 0===e)e="_unknown";else{var n=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);e=48<=n&&57>=n?"_"+e:e}return new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var Y=void 0;function K(e){throw new Y(e)}function Q(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||K('type "'+r+'" must have a positive integer typeid pointer'),G.hasOwnProperty(e)){if(n.D)return;K("Cannot register type '"+r+"' twice")}G[e]=t,delete Z[e],q.hasOwnProperty(e)&&(t=q[e],delete q[e],t.forEach((function(e){e()})))}var $=[],ee=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function te(e){return this.fromWireType(O[e>>2])}function ne(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function re(e,t){switch(t){case 2:return function(e){return this.fromWireType(C[e>>2])};case 3:return function(e){return this.fromWireType(j[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function ae(e,t,n){switch(t){case 0:return n?function(e){return w[e]}:function(e){return _[e]};case 1:return n?function(e){return k[e>>1]}:function(e){return E[e>>1]};case 2:return n?function(e){return A[e>>2]}:function(e){return O[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}for(var ie=Array(256),oe=0;256>oe;++oe)ie[oe]=String.fromCharCode(oe);z=ie,Y=t.BindingError=X("BindingError"),t.InternalError=X("InternalError"),t.count_emval_handles=function(){for(var e=0,t=5;t<ee.length;++t)void 0!==ee[t]&&++e;return e},t.get_first_emval=function(){for(var e=5;e<ee.length;++e)if(void 0!==ee[e])return ee[e];return null};var ce={i:function(e,t,n,r,a){var i=V(n);Q(e,{name:t=J(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:a},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var r=w;else if(2===n)r=k;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=A}return this.fromWireType(r[e>>i])},A:null})},h:function(e,t){Q(e,{name:t=J(t),fromWireType:function(e){var t=ee[e].value;return 4<e&&0===--ee[e].F&&(ee[e]=void 0,$.push(e)),t},toWireType:function(e,t){return function(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=$.length?$.pop():ee.length;return ee[t]={F:1,value:e},t}}(t)},argPackAdvance:8,readValueFromPointer:te,A:null})},d:function(e,t,n){n=V(n),Q(e,{name:t=J(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+ne(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:re(t,n),A:null})},b:function(e,t,n,r,a){function i(e){return e}t=J(t),-1===a&&(a=4294967295);var o=V(n);if(0===r){var c=32-8*n;i=function(e){return e<<c>>>c}}var u=-1!=t.indexOf("unsigned");Q(e,{name:t,fromWireType:i,toWireType:function(e,n){if("number"!==typeof n&&"boolean"!==typeof n)throw new TypeError('Cannot convert "'+ne(n)+'" to '+this.name);if(n<r||n>a)throw new TypeError('Passing a number "'+ne(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+a+"]!");return u?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:ae(t,o,0!==r),A:null})},a:function(e,t,n){function r(e){var t=O;return new a(y,t[1+(e>>=2)],t[e])}var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];Q(e,{name:n=J(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{D:!0})},e:function(e,t){var n="std::string"===(t=J(t));Q(e,{name:t,fromWireType:function(e){var t=O[e>>2];if(n)for(var r=e+4,a=0;a<=t;++a){var i=e+4+a;if(a==t||0==_[i]){if(r){var o=r,c=_,u=o+(i-r);for(r=o;c[r]&&!(r>=u);)++r;if(16<r-o&&c.subarray&&f)o=f.decode(c.subarray(o,r));else{for(u="";o<r;){var l=c[o++];if(128&l){var s=63&c[o++];if(192==(224&l))u+=String.fromCharCode((31&l)<<6|s);else{var m=63&c[o++];65536>(l=224==(240&l)?(15&l)<<12|s<<6|m:(7&l)<<18|s<<12|m<<6|63&c[o++])?u+=String.fromCharCode(l):(l-=65536,u+=String.fromCharCode(55296|l>>10,56320|1023&l))}}else u+=String.fromCharCode(l)}o=u}}else o="";if(void 0===d)var d=o;else d+=String.fromCharCode(0),d+=o;r=i+1}}else{for(d=Array(t),a=0;a<t;++a)d[a]=String.fromCharCode(_[e+4+a]);d=d.join("")}return fe(e),d},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"===typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||K("Cannot pass non-string to std::string");var a=(n&&r?function(){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++n)),127>=r?++e:e=2047>=r?e+2:65535>=r?e+3:e+4}return e}:function(){return t.length})(),i=se(4+a+1);if(O[i>>2]=a,n&&r)!function(e,t,n){var r=_;if(0<n){n=t+n-1;for(var a=0;a<e.length;++a){var i=e.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),127>=i){if(t>=n)break;r[t++]=i}else{if(2047>=i){if(t+1>=n)break;r[t++]=192|i>>6}else{if(65535>=i){if(t+2>=n)break;r[t++]=224|i>>12}else{if(t+3>=n)break;r[t++]=240|i>>18,r[t++]=128|i>>12&63}r[t++]=128|i>>6&63}r[t++]=128|63&i}}r[t]=0}}(t,i+4,a+1);else if(r)for(r=0;r<a;++r){var o=t.charCodeAt(r);255<o&&(fe(i),K("String has UTF-16 code units that do not fit in 8 bits")),_[i+4+r]=o}else for(r=0;r<a;++r)_[i+4+r]=t[r];return null!==e&&e.push(fe,i),i},argPackAdvance:8,readValueFromPointer:te,A:function(e){fe(e)}})},c:function(e,t,n){if(n=J(n),2===t)var r=d,a=p,i=h,o=function(){return E},c=1;else 4===t&&(r=b,a=v,i=g,o=function(){return O},c=2);Q(e,{name:n,fromWireType:function(e){for(var n,a=O[e>>2],i=o(),u=e+4,l=0;l<=a;++l){var s=e+4+l*t;l!=a&&0!=i[s>>c]||(u=r(u,s-u),void 0===n?n=u:(n+=String.fromCharCode(0),n+=u),u=s+t)}return fe(e),n},toWireType:function(e,r){"string"!==typeof r&&K("Cannot pass non-string to C++ string type "+n);var o=i(r),u=se(4+o+t);return O[u>>2]=o>>c,a(r,u+4,o+t),null!==e&&e.push(fe,u),u},argPackAdvance:8,readValueFromPointer:te,A:function(e){fe(e)}})},j:function(e,t){Q(e,{G:!0,name:t=J(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},f:function(e,t,n){_.copyWithin(e,t,t+n)},g:function(){W("OOM")}};!function(){function e(e){t.asm=e.exports,l=t.asm.k,y=e=l.buffer,t.HEAP8=w=new Int8Array(e),t.HEAP16=k=new Int16Array(e),t.HEAP32=A=new Int32Array(e),t.HEAPU8=_=new Uint8Array(e),t.HEAPU16=E=new Uint16Array(e),t.HEAPU32=O=new Uint32Array(e),t.HEAPF32=C=new Float32Array(e),t.HEAPF64=j=new Float64Array(e),S=t.asm.v,M--,t.monitorRunDependencies&&t.monitorRunDependencies(M),0==M&&(null!==P&&(clearInterval(P),P=null),U&&(e=U,U=null,e()))}function n(t){e(t.instance)}function a(e){return(c||"function"!==typeof fetch?Promise.resolve().then((function(){return F()})):fetch(B,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+B+"'";return e.arrayBuffer()})).catch((function(){return F()}))).then((function(e){return WebAssembly.instantiate(e,i)})).then(e,(function(e){u("failed to asynchronously prepare wasm: "+e),W(e)}))}var i={a:ce};if(M++,t.monitorRunDependencies&&t.monitorRunDependencies(M),t.instantiateWasm)try{return t.instantiateWasm(i,e)}catch(o){return u("Module.instantiateWasm callback failed with error: "+o),!1}(c||"function"!==typeof WebAssembly.instantiateStreaming||D()||"function"!==typeof fetch?a(n):fetch(B,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(n,(function(e){return u("wasm streaming compile failed: "+e),u("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}();var ue=t.___wasm_call_ctors=function(){return(ue=t.___wasm_call_ctors=t.asm.l).apply(null,arguments)};t._rotate180=function(){return(t._rotate180=t.asm.m).apply(null,arguments)},t._mirror_reflection=function(){return(t._mirror_reflection=t.asm.n).apply(null,arguments)},t._rotate90=function(){return(t._rotate90=t.asm.o).apply(null,arguments)},t._invert=function(){return(t._invert=t.asm.p).apply(null,arguments)},t._brighten=function(){return(t._brighten=t.asm.q).apply(null,arguments)},t._gray_scale=function(){return(t._gray_scale=t.asm.r).apply(null,arguments)},t._crop=function(){return(t._crop=t.asm.s).apply(null,arguments)},t.___getTypeName=function(){return(t.___getTypeName=t.asm.t).apply(null,arguments)},t.___embind_register_native_and_builtin_types=function(){return(t.___embind_register_native_and_builtin_types=t.asm.u).apply(null,arguments)};var le,se=t._malloc=function(){return(se=t._malloc=t.asm.w).apply(null,arguments)},fe=t._free=function(){return(fe=t._free=t.asm.x).apply(null,arguments)};function me(){function e(){if(!le&&(le=!0,t.calledRun=!0,!s)){if(L(I),L(T),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();R.unshift(e)}L(R)}}if(!(0<M)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)N();L(x),0<M||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(U=function e(){le||me(),le||(U=e)},t.run=me,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return me(),e.ready},H=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(t){var n,r;(t="undefined"!==typeof(t=t||{})?t:{}).ready=new Promise((function(e,t){n=e,r=t}));var a,i={};for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);var o,c=[],u="";"undefined"!==typeof document&&document.currentScript&&(u=document.currentScript.src),e&&(u=e),u=0!==u.indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"";t.print||console.log.bind(console);var l,s=t.printErr||console.warn.bind(console);for(a in i)i.hasOwnProperty(a)&&(t[a]=i[a]);i=null,t.arguments&&(c=t.arguments),t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(l=t.wasmBinary);t.noExitRuntime;var f,m={Memory:function(e){this.buffer=new ArrayBuffer(65536*e.initial)},Module:function(e){},Instance:function(e,t){this.exports=function(e){for(var t,n=new Uint8Array(123),r=25;r>=0;--r)n[48+r]=52+r,n[65+r]=r,n[97+r]=26+r;function a(e){!function(e,t,r){for(var a,i,o=0,c=t,u=r.length,l=t+(3*u>>2)-("="==r[u-2])-("="==r[u-1]);o<u;o+=4)a=n[r.charCodeAt(o+1)],i=n[r.charCodeAt(o+2)],e[c++]=n[r.charCodeAt(o)]<<2|a>>4,c<l&&(e[c++]=a<<4|i>>2),c<l&&(e[c++]=i<<6|n[r.charCodeAt(o+3)])}(t,1025,"BlA=")}return n[43]=62,n[47]=63,function(e){var n,r=e.a.buffer,i=new Int8Array(r),o=(new Int16Array(r),new Int32Array(r)),c=new Uint8Array(r),u=(new Uint16Array(r),new Uint32Array(r)),l=(new Float32Array(r),new Float64Array(r),Math.imul),s=(Math.fround,Math.abs,Math.clz32,Math.min,Math.max,Math.floor,Math.ceil,Math.trunc,Math.sqrt,e.abort),f=e.b,m=5244416;function d(e){var t,n;return(e=(t=o[256])+(n=e+3&-4)|0)>>>0<=t>>>0&&(0|n)>=1||e>>>0>(r.byteLength/65536|0)<<16>>>0&&!(0|f(0|e))?(o[257]=48,-1):(o[256]=e,t)}function p(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}return t=c,a(),{c:function(){},d:function(e,t,n){e|=0,n|=0;var r,a=0,o=0,u=0,l=0,s=0,f=0,m=0,d=0,p=0,h=0,b=0,v=0,g=0;if(r=(0|(t|=0))/2|0,(0|t)>=2)for(m=t-2|0,d=t-3|0,p=t-4|0;h=c[0|(a=(o+p|0)+e|0)],b=c[0|(l=(o+d|0)+e|0)],v=c[0|(s=(o+m|0)+e|0)],o=c[0|(f=((-1^u)+t|0)+e|0)],g=a,a=e+u|0,i[0|g]=c[0|a],i[0|l]=c[a+1|0],i[0|s]=c[a+2|0],i[0|f]=c[a+3|0],i[a+3|0]=o,i[a+2|0]=v,i[a+1|0]=b,i[0|a]=h,o=0-(u=n+u|0)|0,(0|u)<(0|r););},e:function(e,t,n,r,a){e|=0,t|=0,n|=0,a|=0;var o=0,u=0,s=0,f=0,m=0,d=0,p=0,h=0;if(!((0|(r|=0))<1)&&!((0|(s=l(n,a)))<2))for(d=(0|s)/2|0,t=0;;){for(p=l(t,s),h=l(s,t=t+1|0),n=0;f=c[0|(o=(n+p|0)+e|0)]|c[o+1|0]<<8|c[o+2|0]<<16|c[o+3|0]<<24,u=(m=(h-n|0)+e|0)-4|0,i[0|o]=c[0|u],i[o+1|0]=c[m-3|0],i[o+2|0]=c[m-2|0],i[o+3|0]=c[m-1|0],i[0|u]=f,i[u+1|0]=f>>>8,i[u+2|0]=f>>>16,i[u+3|0]=f>>>24,(0|d)>(0|(n=n+a|0)););if((0|t)==(0|r))break}},f:function(e,t,n,r,a,o){e|=0,t|=0,n|=0,a|=0,o|=0;var u=0,s=0,f=0,m=0,d=0,p=0;if(!((0|(r|=0))<1)&&!((0|(d=l(a,o)))<1))for(n=0;;){for(m=0,u=0;s=t+p|0,f=l(l(a-(m=!((0|u)%(0|o)|0)+m|0)|0,r)+n|0,o)+e|0,i[0|s]=c[0|f],i[s+1|0]=c[f+1|0],i[s+2|0]=c[f+2|0],i[s+3|0]=c[f+3|0],p=o+p|0,(0|d)>(0|(u=o+u|0)););if((0|r)==(0|(n=n+1|0)))break}},g:function(e,t,n){e|=0,n|=0;var r=0,a=0,o=0,u=0;if(!((0|(t|=0))<1))if(1==(0|n)){if(u=1&(t=1+(((r=t-1|0)>>>0)/(n>>>0)|0)|0),o=c[e+1|0],n>>>0<=r>>>0)for(t&=-2;i[(r=e+a|0)+1|0]=-1^o,i[0|r]=-1^c[0|r],o=c[r+2|0],i[r+2|0]=-1^o,i[(a=(r=n+a|0)+e|0)+1|0]=o,i[0|a]=-1^c[0|a],o=-1^c[a+2|0],i[a+2|0]=o,a=n+r|0,t=t-2|0;);u&&(i[(e=e+a|0)+1|0]=-1^o,i[0|e]=-1^c[0|e],i[e+2|0]=-1^c[e+2|0])}else for(;i[0|(r=e+a|0)]=-1^c[0|r],i[r+1|0]=-1^c[r+1|0],i[r+2|0]=-1^c[r+2|0],(0|(a=n+a|0))<(0|t););},h:function(e,t,n,r){e|=0,n|=0,r|=0;var a=0,o=0,u=0,l=0;if(!((0|(t|=0))<1))if(1==(0|r))for(a=c[e+1|0];a=(0|(a=(255&a)+n|0))>0?a:0,i[(o=e+u|0)+1|0]=(0|a)<255?a:255,a=(0|(a=c[0|o]+n|0))>0?a:0,i[0|o]=(0|a)<255?a:255,l=o,a=(0|(o=(0|(o=c[o+2|0]+n|0))>0?o:0))<255?o:255,i[l+2|0]=a,(0|(u=r+u|0))<(0|t););else for(;a=(0|(a=c[0|(o=e+u|0)]+n|0))>0?a:0,i[0|o]=(0|a)<255?a:255,a=(0|(a=c[o+1|0]+n|0))>0?a:0,i[o+1|0]=(0|a)<255?a:255,l=o,o=(0|(o=c[o+2|0]+n|0))>0?o:0,i[l+2|0]=(0|o)<255?o:255,(0|(u=r+u|0))<(0|t););},i:function(e,t,n){e|=0,n|=0;var r=0,a=0,o=0,u=0;if(!((0|(t|=0))<1)){if(u=1&(r=1+(((a=t-1|0)>>>0)/(n>>>0)|0)|0),t=0,n>>>0<=a>>>0)for(a=-2&r;o=c[0|(r=e+t|0)],i[r+2|0]=o,i[r+1|0]=o,r=c[0|(t=(o=t+n|0)+e|0)],i[t+2|0]=r,i[t+1|0]=r,t=n+o|0,a=a-2|0;);u&&(t=c[0|(e=e+t|0)],i[e+2|0]=t,i[e+1|0]=t)}},j:function(e,t,n,r,a,o,u,s,f,m){e|=0,t|=0,n|=0,r|=0,a|=0,o|=0,u|=0,s|=0,m|=0;var d=0,p=0,h=0;if(!((0|(f|=0))<1)&&!((0|(n=l(u,m)))>=(0|(d=l(u+s|0,m)))))for(f=o+f|0,p=l(r,m),r=0;;){for(h=l(o,p),s=n;u=(s+h|0)+e|0,i[0|(a=t+r|0)]=c[0|u],i[a+1|0]=c[u+1|0],i[a+2|0]=c[u+2|0],i[a+3|0]=c[u+3|0],r=r+m|0,(0|d)>(0|(s=s+m|0)););if(!((0|f)>(0|(o=o+1|0))))break}},k:function(e){var t,n=0,r=0,a=0,i=0,l=0,f=0,h=0,b=0,v=0,g=0,y=0;m=t=m-16|0;e:{t:{n:{r:{a:{i:{o:{c:{u:{l:{s:{f:{if((e|=0)>>>0<=244){if(3&(n=(l=o[258])>>>(r=(b=e>>>0<11?16:e+11&-8)>>>3|0)|0)){e=(i=o[(n=(a=r+(1&(-1^n))|0)<<3)+1080>>2])+8|0,(0|(r=o[i+8>>2]))!=(0|(n=n+1072|0))?(o[r+12>>2]=n,o[n+8>>2]=r):o[258]=p(a)&l,n=a<<3,o[i+4>>2]=3|n,o[(n=n+i|0)+4>>2]=1|o[n+4>>2];break e}if((g=o[260])>>>0>=b>>>0)break f;if(n){r=e=(n=(0-(e=(0-(e=2<<r)|e)&n<<r)&e)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,f=o[(e=(r=((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)|0)<<3)+1080>>2],(0|(n=o[f+8>>2]))!=(0|(e=e+1072|0))?(o[n+12>>2]=e,o[e+8>>2]=n):(l=p(r)&l,o[258]=l),e=f+8|0,o[f+4>>2]=3|b,i=(n=r<<3)-b|0,o[(a=f+b|0)+4>>2]=1|i,o[n+f>>2]=i,g&&(r=1072+((n=g>>>3|0)<<3)|0,f=o[263],(n=1<<n)&l?n=o[r+8>>2]:(o[258]=n|l,n=r),o[r+8>>2]=f,o[n+12>>2]=f,o[f+12>>2]=r,o[f+8>>2]=n),o[263]=a,o[260]=i;break e}if(!(h=o[259]))break f;for(r=e=(n=(h&0-h)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,n=o[1336+(((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)<<2)>>2],i=(-8&o[n+4>>2])-b|0,r=n;(e=o[r+16>>2])||(e=o[r+20>>2]);)i=(a=(r=(-8&o[e+4>>2])-b|0)>>>0<i>>>0)?r:i,n=a?e:n,r=e;if((v=n+b|0)>>>0<=n>>>0)break s;if(y=o[n+24>>2],(0|(a=o[n+12>>2]))!=(0|n)){e=o[n+8>>2],o[e+12>>2]=a,o[a+8>>2]=e;break t}if(!(e=o[(r=n+20|0)>>2])){if(!(e=o[n+16>>2]))break l;r=n+16|0}for(;f=r,a=e,(e=o[(r=e+20|0)>>2])||(r=a+16|0,e=o[a+16>>2]););o[f>>2]=0;break t}if(b=-1,!(e>>>0>4294967231)&&(b=-8&(e=e+11|0),v=o[259])){l=31,i=0-b|0,b>>>0<=16777215&&(e=e>>>8|0,e<<=f=e+1048320>>>16&8,l=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|f)|0)<<1|b>>>e+21&1)|0);m:{d:{if(r=o[1336+(l<<2)>>2])for(e=0,n=b<<(31==(0|l)?0:25-(l>>>1|0)|0);;){if(!((f=(-8&o[r+4>>2])-b|0)>>>0>=i>>>0)&&(a=r,!(i=f))){i=0,e=r;break d}if(f=o[r+20>>2],r=o[16+((n>>>29&4)+r|0)>>2],e=f?(0|f)==(0|r)?e:f:e,n<<=1,!r)break}else e=0;if(!(e|a)){if(!(e=(0-(e=2<<l)|e)&v))break f;r=e=(n=(e&0-e)-1|0)>>>12&16,r|=e=(n=n>>>e|0)>>>5&8,r|=e=(n=n>>>e|0)>>>2&4,e=o[1336+(((r|=e=(n=n>>>e|0)>>>1&2)|(e=(n=n>>>e|0)>>>1&1))+(n>>>e|0)<<2)>>2]}if(!e)break m}for(;i=(r=(n=(-8&o[e+4>>2])-b|0)>>>0<i>>>0)?n:i,a=r?e:a,e=(n=o[e+16>>2])||o[e+20>>2];);}if(!(!a|o[260]-b>>>0<=i>>>0)){if((h=a+b|0)>>>0<=a>>>0)break s;if(l=o[a+24>>2],(0|a)!=(0|(n=o[a+12>>2]))){e=o[a+8>>2],o[e+12>>2]=n,o[n+8>>2]=e;break n}if(!(e=o[(r=a+20|0)>>2])){if(!(e=o[a+16>>2]))break u;r=a+16|0}for(;f=r,n=e,(e=o[(r=e+20|0)>>2])||(r=n+16|0,e=o[n+16>>2]););o[f>>2]=0;break n}}}if((r=o[260])>>>0>=b>>>0){a=o[263],(n=r-b|0)>>>0>=16?(o[260]=n,e=a+b|0,o[263]=e,o[e+4>>2]=1|n,o[r+a>>2]=n,o[a+4>>2]=3|b):(o[263]=0,o[260]=0,o[a+4>>2]=3|r,o[(e=r+a|0)+4>>2]=1|o[e+4>>2]),e=a+8|0;break e}if((h=o[261])>>>0>b>>>0){n=h-b|0,o[261]=n,e=(r=o[264])+b|0,o[264]=e,o[e+4>>2]=1|n,o[r+4>>2]=3|b,e=r+8|0;break e}if(e=0,n=v=b+47|0,o[376]?r=o[378]:(o[379]=-1,o[380]=-1,o[377]=4096,o[378]=4096,o[376]=t+12&-16^1431655768,o[381]=0,o[369]=0,r=4096),(r=(f=n+r|0)&(i=0-r|0))>>>0<=b>>>0)break e;if((a=o[368])&&a>>>0<(l=(n=o[366])+r|0)>>>0|n>>>0>=l>>>0)break e;if(4&c[1476])break i;f:{m:{if(a=o[264])for(e=1480;;){if(a>>>0<(n=o[e>>2])+o[e+4>>2]>>>0&&n>>>0<=a>>>0)break m;if(!(e=o[e+8>>2]))break}if(-1==(0|(n=d(0))))break o;if(l=r,(e=(a=o[377])-1|0)&n&&(l=(r-n|0)+(e+n&0-a)|0),l>>>0<=b>>>0|l>>>0>2147483646)break o;if((a=o[368])&&a>>>0<(i=(e=o[366])+l|0)>>>0|e>>>0>=i>>>0)break o;if((0|n)!=(0|(e=d(l))))break f;break a}if((l=i&f-h)>>>0>2147483646)break o;if((0|(n=d(l)))==(o[e>>2]+o[e+4>>2]|0))break c;e=n}if(!(-1==(0|e)|b+48>>>0<=l>>>0)){if((n=(n=o[378])+(v-l|0)&0-n)>>>0>2147483646){n=e;break a}if(-1!=(0|d(n))){l=n+l|0,n=e;break a}d(0-l|0);break o}if(n=e,-1!=(0|e))break a;break o}s()}a=0;break t}n=0;break n}if(-1!=(0|n))break a}o[369]=4|o[369]}if(r>>>0>2147483646)break r;if((n=d(r))>>>0>=(e=d(0))>>>0|-1==(0|n)|-1==(0|e))break r;if((l=e-n|0)>>>0<=b+40>>>0)break r}e=o[366]+l|0,o[366]=e,e>>>0>u[367]&&(o[367]=e);a:{i:{o:{if(f=o[264]){for(e=1480;;){if(((a=o[e>>2])+(r=o[e+4>>2])|0)==(0|n))break o;if(!(e=o[e+8>>2]))break}break i}for((e=o[262])>>>0<=n>>>0&&e||(o[262]=n),e=0,o[371]=l,o[370]=n,o[266]=-1,o[267]=o[376],o[373]=0;r=(a=e<<3)+1072|0,o[a+1080>>2]=r,o[a+1084>>2]=r,32!=(0|(e=e+1|0)););r=(a=l-40|0)-(e=n+8&7?-8-n&7:0)|0,o[261]=r,e=e+n|0,o[264]=e,o[e+4>>2]=1|r,o[4+(n+a|0)>>2]=40,o[265]=o[380];break a}if(!(8&o[e+12>>2]|n>>>0<=f>>>0|a>>>0>f>>>0)){o[e+4>>2]=r+l,r=(e=f+8&7?-8-f&7:0)+f|0,o[264]=r,e=(n=o[261]+l|0)-e|0,o[261]=e,o[r+4>>2]=1|e,o[4+(n+f|0)>>2]=40,o[265]=o[380];break a}}(a=o[262])>>>0>n>>>0&&(o[262]=n,a=0),r=n+l|0,e=1480;i:{o:{c:{u:{l:{s:{for(;;){if((0|r)!=o[e>>2]){if(e=o[e+8>>2])continue;break s}break}if(!(8&c[e+12|0]))break l}for(e=1480;;){if((r=o[e>>2])>>>0<=f>>>0&&(i=r+o[e+4>>2]|0)>>>0>f>>>0)break u;e=o[e+8>>2]}}if(o[e>>2]=n,o[e+4>>2]=o[e+4>>2]+l,o[(v=(n+8&7?-8-n&7:0)+n|0)+4>>2]=3|b,r=((l=r+(r+8&7?-8-r&7:0)|0)-v|0)-b|0,h=b+v|0,(0|l)==(0|f)){o[264]=h,e=o[261]+r|0,o[261]=e,o[h+4>>2]=1|e;break o}if(o[263]==(0|l)){o[263]=h,e=o[260]+r|0,o[260]=e,o[h+4>>2]=1|e,o[e+h>>2]=e;break o}if(1==(3&(e=o[l+4>>2]))){f=-8&e;l:if(e>>>0<=255){if(a=o[l+8>>2],e=e>>>3|0,(0|(n=o[l+12>>2]))==(0|a)){o[258]=o[258]&p(e);break l}o[a+12>>2]=n,o[n+8>>2]=a}else{if(b=o[l+24>>2],(0|l)==(0|(n=o[l+12>>2])))if((i=o[(e=l+20|0)>>2])||(i=o[(e=l+16|0)>>2])){for(;a=e,(i=o[(e=(n=i)+20|0)>>2])||(e=n+16|0,i=o[n+16>>2]););o[a>>2]=0}else n=0;else e=o[l+8>>2],o[e+12>>2]=n,o[n+8>>2]=e;if(b){a=o[l+28>>2];s:{if(o[(e=1336+(a<<2)|0)>>2]==(0|l)){if(o[e>>2]=n,n)break s;o[259]=o[259]&p(a);break l}if(o[b+(o[b+16>>2]==(0|l)?16:20)>>2]=n,!n)break l}o[n+24>>2]=b,(e=o[l+16>>2])&&(o[n+16>>2]=e,o[e+24>>2]=n),(e=o[l+20>>2])&&(o[n+20>>2]=e,o[e+24>>2]=n)}}l=l+f|0,r=r+f|0}if(o[l+4>>2]=-2&o[l+4>>2],o[h+4>>2]=1|r,o[r+h>>2]=r,r>>>0<=255){n=1072+((e=r>>>3|0)<<3)|0,(r=o[258])&(e=1<<e)?e=o[n+8>>2]:(o[258]=e|r,e=n),o[n+8>>2]=h,o[e+12>>2]=h,o[h+12>>2]=n,o[h+8>>2]=e;break o}if(e=31,r>>>0<=16777215&&(e=r>>>8|0,e<<=i=e+1048320>>>16&8,e=28+((e=((e<<=a=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|a|i)|0)<<1|r>>>e+21&1)|0),o[h+28>>2]=e,o[h+16>>2]=0,o[h+20>>2]=0,i=1336+(e<<2)|0,(a=o[259])&(n=1<<e)){for(e=r<<(31==(0|e)?0:25-(e>>>1|0)|0),n=o[i>>2];;){if(a=n,(-8&o[n+4>>2])==(0|r))break c;if(n=e>>>29|0,e<<=1,!(n=o[(i=a+(4&n)|0)+16>>2]))break}o[i+16>>2]=h,o[h+24>>2]=a}else o[259]=n|a,o[i>>2]=h,o[h+24>>2]=i;o[h+12>>2]=h,o[h+8>>2]=h;break o}for(r=(a=l-40|0)-(e=n+8&7?-8-n&7:0)|0,o[261]=r,e=e+n|0,o[264]=e,o[e+4>>2]=1|r,o[4+(n+a|0)>>2]=40,o[265]=o[380],o[(r=(e=(i+(i-39&7?39-i&7:0)|0)-47|0)>>>0<f+16>>>0?f:e)+4>>2]=27,e=o[373],o[r+16>>2]=o[372],o[r+20>>2]=e,e=o[371],o[r+8>>2]=o[370],o[r+12>>2]=e,o[372]=r+8,o[371]=l,o[370]=n,o[373]=0,e=r+24|0;o[e+4>>2]=7,n=e+8|0,e=e+4|0,n>>>0<i>>>0;);if((0|r)==(0|f))break a;if(o[r+4>>2]=-2&o[r+4>>2],i=r-f|0,o[f+4>>2]=1|i,o[r>>2]=i,i>>>0<=255){n=1072+((e=i>>>3|0)<<3)|0,(r=o[258])&(e=1<<e)?e=o[n+8>>2]:(o[258]=e|r,e=n),o[n+8>>2]=f,o[e+12>>2]=f,o[f+12>>2]=n,o[f+8>>2]=e;break a}if(e=31,o[f+16>>2]=0,o[f+20>>2]=0,i>>>0<=16777215&&(e=i>>>8|0,e<<=a=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|a)|0)<<1|i>>>e+21&1)|0),o[f+28>>2]=e,a=1336+(e<<2)|0,(r=o[259])&(n=1<<e)){for(e=i<<(31==(0|e)?0:25-(e>>>1|0)|0),n=o[a>>2];;){if(r=n,(0|i)==(-8&o[n+4>>2]))break i;if(n=e>>>29|0,e<<=1,!(n=o[(a=r+(4&n)|0)+16>>2]))break}o[a+16>>2]=f,o[f+24>>2]=r}else o[259]=n|r,o[a>>2]=f,o[f+24>>2]=a;o[f+12>>2]=f,o[f+8>>2]=f;break a}e=o[a+8>>2],o[e+12>>2]=h,o[a+8>>2]=h,o[h+24>>2]=0,o[h+12>>2]=a,o[h+8>>2]=e}e=v+8|0;break e}e=o[r+8>>2],o[e+12>>2]=f,o[r+8>>2]=f,o[f+24>>2]=0,o[f+12>>2]=r,o[f+8>>2]=e}if(!((e=o[261])>>>0<=b>>>0)){n=e-b|0,o[261]=n,e=(r=o[264])+b|0,o[264]=e,o[e+4>>2]=1|n,o[r+4>>2]=3|b,e=r+8|0;break e}}o[257]=48,e=0;break e}n:if(l){r=o[a+28>>2];r:{if(o[(e=1336+(r<<2)|0)>>2]==(0|a)){if(o[e>>2]=n,n)break r;v=p(r)&v,o[259]=v;break n}if(o[l+(o[l+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}o[n+24>>2]=l,(e=o[a+16>>2])&&(o[n+16>>2]=e,o[e+24>>2]=n),(e=o[a+20>>2])&&(o[n+20>>2]=e,o[e+24>>2]=n)}n:if(i>>>0<=15)e=i+b|0,o[a+4>>2]=3|e,o[(e=e+a|0)+4>>2]=1|o[e+4>>2];else if(o[a+4>>2]=3|b,o[h+4>>2]=1|i,o[i+h>>2]=i,i>>>0<=255)n=1072+((e=i>>>3|0)<<3)|0,(r=o[258])&(e=1<<e)?e=o[n+8>>2]:(o[258]=e|r,e=n),o[n+8>>2]=h,o[e+12>>2]=h,o[h+12>>2]=n,o[h+8>>2]=e;else{e=31,i>>>0<=16777215&&(e=i>>>8|0,e<<=f=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(n=e+245760>>>16&2)>>>15|0)-(n|r|f)|0)<<1|i>>>e+21&1)|0),o[h+28>>2]=e,o[h+16>>2]=0,o[h+20>>2]=0,r=1336+(e<<2)|0;r:{if((n=1<<e)&v){for(e=i<<(31==(0|e)?0:25-(e>>>1|0)|0),b=o[r>>2];;){if((-8&o[(n=b)+4>>2])==(0|i))break r;if(r=e>>>29|0,e<<=1,!(b=o[(r=n+(4&r)|0)+16>>2]))break}o[r+16>>2]=h,o[h+24>>2]=n}else o[259]=n|v,o[r>>2]=h,o[h+24>>2]=r;o[h+12>>2]=h,o[h+8>>2]=h;break n}e=o[n+8>>2],o[e+12>>2]=h,o[n+8>>2]=h,o[h+24>>2]=0,o[h+12>>2]=n,o[h+8>>2]=e}e=a+8|0;break e}t:if(y){r=o[n+28>>2];n:{if(o[(e=1336+(r<<2)|0)>>2]==(0|n)){if(o[e>>2]=a,a)break n;o[259]=p(r)&h;break t}if(o[(o[y+16>>2]==(0|n)?16:20)+y>>2]=a,!a)break t}o[a+24>>2]=y,(e=o[n+16>>2])&&(o[a+16>>2]=e,o[e+24>>2]=a),(e=o[n+20>>2])&&(o[a+20>>2]=e,o[e+24>>2]=a)}i>>>0<=15?(e=i+b|0,o[n+4>>2]=3|e,o[(e=e+n|0)+4>>2]=1|o[e+4>>2]):(o[n+4>>2]=3|b,o[v+4>>2]=1|i,o[i+v>>2]=i,g&&(r=1072+((e=g>>>3|0)<<3)|0,a=o[263],(e=1<<e)&l?e=o[r+8>>2]:(o[258]=e|l,e=r),o[r+8>>2]=a,o[e+12>>2]=a,o[a+12>>2]=r,o[a+8>>2]=e),o[263]=v,o[260]=i),e=n+8|0}return m=t+16|0,0|e},l:function(e){var t=0,n=0,r=0,a=0,i=0,c=0,l=0;e:if(e|=0){i=(r=e-8|0)+(e=-8&(t=o[e-4>>2]))|0;t:if(!(1&t)){if(!(3&t))break e;if((r=r-(t=o[r>>2])|0)>>>0<u[262])break e;if(e=e+t|0,o[263]==(0|r)){if(3==(3&(t=o[i+4>>2])))return o[260]=e,o[i+4>>2]=-2&t,o[r+4>>2]=1|e,void(o[e+r>>2]=e)}else{if(t>>>0<=255){if(a=o[r+8>>2],t=t>>>3|0,(0|(n=o[r+12>>2]))==(0|a)){o[258]=o[258]&p(t);break t}o[a+12>>2]=n,o[n+8>>2]=a;break t}if(l=o[r+24>>2],(0|r)==(0|(t=o[r+12>>2])))if((n=o[(a=r+20|0)>>2])||(n=o[(a=r+16|0)>>2])){for(;c=a,(n=o[(a=(t=n)+20|0)>>2])||(a=t+16|0,n=o[t+16>>2]););o[c>>2]=0}else t=0;else n=o[r+8>>2],o[n+12>>2]=t,o[t+8>>2]=n;if(!l)break t;a=o[r+28>>2];n:{if(o[(n=1336+(a<<2)|0)>>2]==(0|r)){if(o[n>>2]=t,t)break n;o[259]=o[259]&p(a);break t}if(o[l+(o[l+16>>2]==(0|r)?16:20)>>2]=t,!t)break t}if(o[t+24>>2]=l,(n=o[r+16>>2])&&(o[t+16>>2]=n,o[n+24>>2]=t),!(n=o[r+20>>2]))break t;o[t+20>>2]=n,o[n+24>>2]=t}}if(!(r>>>0>=i>>>0)&&1&(t=o[i+4>>2])){t:{if(!(2&t)){if(o[264]==(0|i)){if(o[264]=r,e=o[261]+e|0,o[261]=e,o[r+4>>2]=1|e,o[263]!=(0|r))break e;return o[260]=0,void(o[263]=0)}if(o[263]==(0|i))return o[263]=r,e=o[260]+e|0,o[260]=e,o[r+4>>2]=1|e,void(o[e+r>>2]=e);e=(-8&t)+e|0;n:if(t>>>0<=255){if(t=t>>>3|0,(0|(n=o[i+8>>2]))==(0|(a=o[i+12>>2]))){o[258]=o[258]&p(t);break n}o[n+12>>2]=a,o[a+8>>2]=n}else{if(l=o[i+24>>2],(0|i)==(0|(t=o[i+12>>2])))if((n=o[(a=i+20|0)>>2])||(n=o[(a=i+16|0)>>2])){for(;c=a,(n=o[(a=(t=n)+20|0)>>2])||(a=t+16|0,n=o[t+16>>2]););o[c>>2]=0}else t=0;else n=o[i+8>>2],o[n+12>>2]=t,o[t+8>>2]=n;if(l){a=o[i+28>>2];r:{if(o[(n=1336+(a<<2)|0)>>2]==(0|i)){if(o[n>>2]=t,t)break r;o[259]=o[259]&p(a);break n}if(o[l+(o[l+16>>2]==(0|i)?16:20)>>2]=t,!t)break n}o[t+24>>2]=l,(n=o[i+16>>2])&&(o[t+16>>2]=n,o[n+24>>2]=t),(n=o[i+20>>2])&&(o[t+20>>2]=n,o[n+24>>2]=t)}}if(o[r+4>>2]=1|e,o[e+r>>2]=e,o[263]!=(0|r))break t;return void(o[260]=e)}o[i+4>>2]=-2&t,o[r+4>>2]=1|e,o[e+r>>2]=e}if(e>>>0<=255)return t=1072+((e=e>>>3|0)<<3)|0,(n=o[258])&(e=1<<e)?e=o[t+8>>2]:(o[258]=e|n,e=t),o[t+8>>2]=r,o[e+12>>2]=r,o[r+12>>2]=t,void(o[r+8>>2]=e);a=31,o[r+16>>2]=0,o[r+20>>2]=0,e>>>0<=16777215&&(t=e>>>8|0,t<<=c=t+1048320>>>16&8,a=28+((t=((t<<=a=t+520192>>>16&4)<<(n=t+245760>>>16&2)>>>15|0)-(n|a|c)|0)<<1|e>>>t+21&1)|0),o[r+28>>2]=a,c=1336+(a<<2)|0;t:{n:{if((n=o[259])&(t=1<<a)){for(a=e<<(31==(0|a)?0:25-(a>>>1|0)|0),t=o[c>>2];;){if(n=t,(-8&o[t+4>>2])==(0|e))break n;if(t=a>>>29|0,a<<=1,!(t=o[(c=n+(4&t)|0)+16>>2]))break}o[c+16>>2]=r,o[r+24>>2]=n}else o[259]=t|n,o[c>>2]=r,o[r+24>>2]=c;o[r+12>>2]=r,o[r+8>>2]=r;break t}e=o[n+8>>2],o[e+12>>2]=r,o[n+8>>2]=r,o[r+24>>2]=0,o[r+12>>2]=n,o[r+8>>2]=e}e=o[266]-1|0,o[266]=e||-1}}},m:((n=[]).set=function(e,t){this[e]=t},n.get=function(e){return this[e]},n)}}(e)}(M)},instantiate:function(e,t){return{then:function(t){var n=new m.Module(e);t({instance:new m.Instance(n)})}}},RuntimeError:Error};l=[],"object"!==typeof m&&O("no native wasm support detected");var d,p=!1;var h,b,v=t.INITIAL_MEMORY||314572800;(f=t.wasmMemory?t.wasmMemory:new m.Memory({initial:v/65536,maximum:v/65536}))&&(d=f.buffer),v=d.byteLength,d=h=d,t.HEAP8=new Int8Array(h),t.HEAP16=new Int16Array(h),t.HEAP32=new Int32Array(h),t.HEAPU8=new Uint8Array(h),t.HEAPU16=new Uint16Array(h),t.HEAPU32=new Uint32Array(h),t.HEAPF32=new Float32Array(h),t.HEAPF64=new Float64Array(h);var g=[],y=[],w=[],_=[];y.push({func:function(){P()}});var k=0,E=null,A=null;function O(e){t.onAbort&&t.onAbort(e),s(e+=""),p=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new m.RuntimeError(e);throw r(n),n}t.preloadedImages={},t.preloadedAudios={};function C(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}var j,S="<<< WASM_BINARY_FILE >>>";function x(e){try{if(e==S&&l)return new Uint8Array(l);var t=R(e);if(t)return t;if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(s){O(s)}}function I(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"===typeof r?void 0===n.arg?b.get(r)():b.get(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}C(S)||(j=S,S=t.locateFile?t.locateFile(j,u):u+j);var T="function"===typeof atob?atob:function(e){var t,n,r,a,i,o,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=c.indexOf(e.charAt(l++))<<2|(a=c.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(i=c.indexOf(e.charAt(l++)))>>2,r=(3&i)<<6|(o=c.indexOf(e.charAt(l++))),u+=String.fromCharCode(t),64!==i&&(u+=String.fromCharCode(n)),64!==o&&(u+=String.fromCharCode(r))}while(l<e.length);return u};function R(e){if(C(e))return function(e){try{for(var t=T(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(a){throw new Error("Converting base64 string to bytes failed.")}}(e.slice("data:application/octet-stream;base64,".length))}var N,M={b:function(e){O("OOM")},a:f},P=(function(){var e={a:M};function n(e,n){var r=e.exports;t.asm=r,b=t.asm.m,function(e){if(k--,t.monitorRunDependencies&&t.monitorRunDependencies(k),0==k&&(null!==E&&(clearInterval(E),E=null),A)){var n=A;A=null,n()}}()}function a(e){n(e.instance)}function i(t){return(l||"function"!==typeof fetch?Promise.resolve().then((function(){return x(S)})):fetch(S,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+S+"'";return e.arrayBuffer()})).catch((function(){return x(S)}))).then((function(t){return m.instantiate(t,e)})).then(t,(function(e){s("failed to asynchronously prepare wasm: "+e),O(e)}))}if(k++,t.monitorRunDependencies&&t.monitorRunDependencies(k),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(o){return s("Module.instantiateWasm callback failed with error: "+o),!1}(l||"function"!==typeof m.instantiateStreaming||C(S)||"function"!==typeof fetch?i(a):fetch(S,{credentials:"same-origin"}).then((function(t){return m.instantiateStreaming(t,e).then(a,(function(e){return s("wasm streaming compile failed: "+e),s("falling back to ArrayBuffer instantiation"),i(a)}))}))).catch(r)}(),t.___wasm_call_ctors=function(){return(P=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)});t._rotate180=function(){return(t._rotate180=t.asm.d).apply(null,arguments)},t._mirror_reflection=function(){return(t._mirror_reflection=t.asm.e).apply(null,arguments)},t._rotate90=function(){return(t._rotate90=t.asm.f).apply(null,arguments)},t._invert=function(){return(t._invert=t.asm.g).apply(null,arguments)},t._brighten=function(){return(t._brighten=t.asm.h).apply(null,arguments)},t._gray_scale=function(){return(t._gray_scale=t.asm.i).apply(null,arguments)},t._crop=function(){return(t._crop=t.asm.j).apply(null,arguments)},t._malloc=function(){return(t._malloc=t.asm.k).apply(null,arguments)},t._free=function(){return(t._free=t.asm.l).apply(null,arguments)};function U(e){function r(){N||(N=!0,t.calledRun=!0,p||(!0,I(y),I(w),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),_.unshift(e);var e;I(_)}()))}e=e||c,k>0||(!function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),g.unshift(e);var e;I(g)}(),k>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),r()}),1)):r()))}if(A=function e(){N||U(),N||(A=e)},t.run=U,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return U(),t.ready}}();function F(e,t,n){for(var r,a,i,o,c=0;c<t/2;c+=n)r=e[t-4-c],a=e[t-3-c],i=e[t-2-c],o=e[t-1-c],e[t-4-c]=e[c],e[t-3-c]=e[c+1],e[t-2-c]=e[c+2],e[t-1-c]=e[c+3],e[c]=r,e[c+1]=a,e[c+2]=i,e[c+3]=o;return e}function L(e,t,n,r,a){for(var i,o,c,u,l,s,f=0;f<r;f++)for(var m=0;m<n*a/2;m+=a)s=n*(f+1)*a-m,i=e[l=n*f*a+m],o=e[l+1],c=e[l+2],u=e[l+3],e[l]=e[s-4],e[l+1]=e[s-3],e[l+2]=e[s-2],e[l+3]=e[s-1],e[s-4]=i,e[s-3]=o,e[s-2]=c,e[s-1]=u;return e}function V(e,t,n,r,a,i){for(var o=0,c=0,u=r,l=a,s=0;s<u;s++)for(var f=0,m=0;f<l*i;f+=i)f%i===0&&m++,c=r*i*(a-m)+s*i,t[o]=e[c],t[o+1]=e[c+1],t[o+2]=e[c+2],t[o+3]=e[c+3],o+=i;return t}function z(e,t,n){for(var r=0;r<t;r+=n)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2];return e}function J(e){return e>255?255:e<0?0:e}function q(e,t,n,r){for(var a=0;a<t;a+=r)e[a]=J(e[a]+n),e[a+1]=J(e[a+1]+n),e[a+2]=J(e[a+2]+n);return e}function G(e,t,n){for(var r,a,i=0;i<t;i+=n)r=e[i],a=e[i+3],e[i]=r,e[i+1]=r,e[i+2]=r,e[i+3]=a;return e}function Z(e){console.log(e)}function X(e,t,n,r,a,i,o,c,u,l){for(var s=0,f=0,m=c+o,d=u+i,p=i;p<d;p++)for(var h=o*l;h<m*l;h+=l,s+=l)f=p*r*l+h,t[s]=e[f],t[s+1]=e[f+1],t[s+2]=e[f+2],t[s+3]=e[f+3];return t}var Y=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(null),s=Object(u.a)(l,2),f=s[0],m=s[1],d=Object(a.useState)(!0),p=Object(u.a)(d,2),h=p[0],b=p[1],y=Object(a.useState)(!0),k=Object(u.a)(y,2),E=k[0],A=k[1],C=Object(a.useState)(),j=Object(u.a)(C,2),S=j[0],x=j[1],I=Object(a.useState)(),T=Object(u.a)(I,2),R=T[0],N=T[1],P=Object(a.useState)(),U=Object(u.a)(P,2),W=U[0],F=U[1],L=Object(a.useState)(0),V=Object(u.a)(L,2),z=V[0],J=V[1],q=Object(a.useState)(0),G=Object(u.a)(q,2),Z=G[0],X=G[1],Y=Object(a.useState)(null),K=Object(u.a)(Y,2),Q=K[0],$=K[1];Object(a.useEffect)((function(){var e=new _;e.postMessage({option:"init"}),$(e),B({noInitialRun:!0,noExitRuntime:!0}).then((function(e){m(e),A(!1)})),H({noInitialRun:!0,noExitRuntime:!0}).then((function(e){c(e),b(!1)}))}),[]);var ee=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.abrupt("return",new Promise((function(e,t){var a=new FileReader;switch(a.onload=function(t){e(t.target.result)},a.onerror=function(e){t(e)},n){case"arraybuffer":a.readAsArrayBuffer(r);break;case"base64":a.readAsDataURL(r);break;default:a.readAsArrayBuffer(r)}})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(e,t,n){var r=document.createElement("canvas");r.height=n,r.width=t;var a=r.getContext("2d"),i=a.createImageData(t,n);return i.data.set(e),a.putImageData(i,0,0),r.toDataURL()},ne=function(e){var t=function(e){if(e instanceof HTMLCanvasElement)return e;var t=document.createElement("canvas");return t.width=e.videoWidth||e.naturalWidth||e.width,t.height=e.videoHeight||e.naturalHeight||e.height,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t}(e),n=t.getContext("2d");n.globalAlpha=1;var r=n.getImageData(0,0,t.width,t.height);return{data:r.data,name:e.value,width:r.width,height:r.height}},re=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],F(URL.createObjectURL(n)),e.next=4,ee(n,"arraybuffer");case 4:r=e.sent,x(new Uint8Array(r)),ae();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){setTimeout((function(){document.body.scrollIntoView({alignToTop:!1,behavior:"smooth",block:"end"})}),100)};return i.a.createElement("div",{className:w.a.downloaderContainer},i.a.createElement("h1",{className:w.a.heading},e.data.title," ",i.a.createElement("span",null,e.data.subtitle)),i.a.createElement("p",{className:w.a.description},e.data.description),e.activeOption<3?i.a.createElement("div",{className:w.a.box},i.a.createElement("input",{type:"file",id:"inputfile",onChange:function(e){return re(e)}}),i.a.createElement("label",{className:w.a.button,htmlFor:"inputfile"},i.a.createElement("span",null,"+ Select image..."))):"",S&&e.activeOption<3?i.a.createElement("div",null,i.a.createElement("img",{src:W,onLoad:function(e){var t=e.target,n=ne(t);N(n.data),J({height:n.height,width:n.width})},alt:"Select"}),i.a.createElement("div",{className:w.a.rangeInput},i.a.createElement("p",{style:{marginBottom:5}},'Set brightness (use "Brighten" button to apply):'),i.a.createElement("input",{className:w.a.slider,type:"range",min:"-100",max:"100",defaultValue:0,onChange:function(e){return X(parseInt(e.target.value))}}),Z)):"",0===e.activeOption?i.a.createElement(O,{worker:Q,tech:0,prepareImageData:ee,createCanvas:te,imageData:R,imageArraySize:z,brightnessValue:Z,scrollBottom:ae}):"",1===e.activeOption?i.a.createElement(O,{worker:Q,tech:1,prepareImageData:ee,createCanvas:te,imageData:R,imageArraySize:z,brightnessValue:Z,scrollBottom:ae}):"",2===e.activeOption?i.a.createElement(O,{worker:Q,tech:2,prepareImageData:ee,createCanvas:te,imageData:R,imageArraySize:z,brightnessValue:Z,scrollBottom:ae}):"",3===e.activeOption?i.a.createElement(M,{worker:Q,prepareImageData:ee,imgToCanvas:ne,scrollBottom:ae}):"",4===e.activeOption?i.a.createElement(D,{wasmModule:f,asmModule:o,jsModule:r,isLoadingAsmModule:h,isLoadingWasmModule:E,prepareImageData:ee,createCanvas:te,imageData:R,imageArraySize:z,brightnessValue:Z,scrollBottom:ae}):"")},K=[{title:"JS",subtitle:"Editor",color:"#E6DF91",description:"Upload an image and choose the filter. Output image will be presented with the execution time of selected functionality (excluding the time of preparing the output data to the canvas)."},{title:"asm.js",subtitle:"Editor",color:"#BBCCFF",description:"Upload an image and choose the filter. Output image will be presented with the execution time of selected functionality (excluding the time of preparing the output data to the canvas)."},{title:"Wasm",subtitle:"Editor",color:"#ffbdbd",description:"Upload an image and choose the filter. Output image will be presented with the execution time of selected functionality (excluding the time of preparing the output data to the canvas)."},{title:"Benchmark",subtitle:"Multi-thread",color:"#bbffd4",description:"Choose which exemplary images of given resolutions will be used for experiments. All of the filters repeated 100 times will be part of the tests. Relative gain shows how much using asm.js or WebAssembly is benefitial in case of performance in compare to JavaScript equivalents."},{title:"Video",subtitle:"Editor",color:"#cfb0ff",description:'Choose module, resolution and filter, then click "Start". FPS counter will appear in top left corner of processed video.'}];var Q=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useRef)(null);return i.a.createElement("main",{ref:o},i.a.createElement(h,{activeOption:n,options:K,onOptionClick:function(e,t){r(t),o.current.style.backgroundColor=K[t].color}}),i.a.createElement("div",{className:s.a.downloaderWrap},i.a.createElement(Y,{activeOption:n,data:K[n],key:K[n].type})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[19,1,2]]]);
//# sourceMappingURL=main.79a02b0c.chunk.js.map